import{_ as S,d as R,q,r as L,V as g,L as O,M as j,a as d,h as t,b as v,c as E,e as o,m as B,x as a,f as z,g as J,F as M,U as G,y as $,G as i,p as H,l as K,a0 as b,$ as C}from"./index.6f18bade.js";const P=p=>(H("data-v-7148c0ec"),p=p(),K(),p),Q=i("\u65B0\u589E"),W=i("\u79FB\u9664"),X=i(" *\u65B0\u589E\u6307\u5728\u5DF2\u6709\u534F\u4F5C\u4EBA\u7684\u57FA\u7840\u4E0A\u589E\u52A0\u65B0\u7684\u534F\u4F5C\u4EBA "),Y=P(()=>B("br",null,null,-1)),Z=i(" *\u79FB\u9664\u6307\u4ECE\u5DF2\u6709\u7684\u534F\u4F5C\u4EBA\u4E2D\u79FB\u9664\u6240\u9009\u7528\u6237 "),ee={class:"dialog-footer",style:{"text-align":"center"}},oe=i("\u786E\u5B9A"),te=i("\u53D6\u6D88"),ae=R({__name:"AddCooperation",emits:["success"],setup(p,{expose:I,emit:h}){const{user:x}=q(),f=L(g),u=O({visible:!1,formData:{cooperationType:"",clientId:"",cooperationUserId:"",departmentId:""},rules:{cooperationType:[{required:!0,message:"\u8BF7\u9009\u62E9",trigger:"blur"}],cooperationUserId:[{required:!0,message:"\u8BF7\u9009\u62E9",trigger:"blur"}]},options:[],openType:""}),{visible:_,formData:c,rules:A,options:D}=j(u);let V=async(s,e=[])=>{if(u.openType=s,!(e!=null&&e.length)){b.error("\u6DFB\u52A0\u534F\u4F5C\u81F3\u5C11\u9700\u9009\u62E91\u6761\u6570\u636E");return}u.formData.clientId=e,await C.queryEmployee().then(r=>{var m;u.options=(m=r.data)==null?void 0:m.map(l=>({label:l.name,value:l.id,departmentId:l.departmentId})).filter(l=>l.value!=x.userInfo.id)}),u.visible=!0};async function T(){var e;let s=JSON.parse(JSON.stringify(u.formData));s.departmentId=((e=u.options.filter(r=>r.value==s.cooperationUserId)[0])==null?void 0:e.departmentId)||"";try{await C.cooperation(s),b.success("\u64CD\u4F5C\u6210\u529F\uFF01"),F(),h("success")}catch{}}function U(){f.value.validate(s=>{s&&T()})}function F(){f.value.resetFields(),u.visible=!1,Object.assign(u.formData,{cooperationType:"",clientId:"",cooperationUserId:"",departmentId:""})}return I({init:V}),(s,e)=>{const r=d("el-radio"),m=d("el-radio-group"),l=d("el-form-item"),k=d("el-option"),w=d("el-select"),y=d("el-button"),N=d("el-dialog");return t(_)?(v(),E(N,{key:0,title:"\u6DFB\u52A0\u534F\u4F5C",modelValue:t(_),"onUpdate:modelValue":e[2]||(e[2]=n=>G(_)?_.value=n:null),width:"500px",onClose:F,"close-on-click-modal":!1,"append-to-body":""},{footer:o(()=>[B("div",ee,[a(y,{type:"primary",onClick:U},{default:o(()=>[oe]),_:1}),a(y,{onClick:F},{default:o(()=>[te]),_:1})])]),default:o(()=>[a(t(g),{ref_key:"dataFormRef",ref:f,model:t(c),rules:t(A),"label-width":"100px"},{default:o(()=>[a(l,{label:"\u9009\u62E9\u7C7B\u578B:",prop:"cooperationType"},{default:o(()=>[a(m,{modelValue:t(c).cooperationType,"onUpdate:modelValue":e[0]||(e[0]=n=>t(c).cooperationType=n),class:"ml-4"},{default:o(()=>[a(r,{label:"INSERT"},{default:o(()=>[Q]),_:1}),a(r,{label:"DELETE"},{default:o(()=>[W]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(l,{label:"\u9009\u62E9\u4EBA\u5458:",prop:"cooperationUserId"},{default:o(()=>[a(w,{modelValue:t(c).cooperationUserId,"onUpdate:modelValue":e[1]||(e[1]=n=>t(c).cooperationUserId=n),style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9"},{default:o(()=>[(v(!0),z(M,null,J(t(D),n=>(v(),E(k,{key:n.value,label:n.label,value:n.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(l,null,{default:o(()=>[X,Y,Z]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])):$("",!0)}}});var le=S(ae,[["__scopeId","data-v-7148c0ec"]]);export{le as A};
