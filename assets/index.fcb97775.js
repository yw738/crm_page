var ye=Object.defineProperty,Ce=Object.defineProperties;var xe=Object.getOwnPropertyDescriptors;var pe=Object.getOwnPropertySymbols;var Se=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable;var Fe=(D,b,g)=>b in D?ye(D,b,{enumerable:!0,configurable:!0,writable:!0,value:g}):D[b]=g,P=(D,b)=>{for(var g in b||(b={}))Se.call(b,g)&&Fe(D,g,b[g]);if(pe)for(var g of pe(b))we.call(b,g)&&Fe(D,g,b[g]);return D},H=(D,b)=>Ce(D,xe(b));import{s as Q}from"./index.e231f6e1.js";import{a as oe}from"./index.2795ed02.js";import{_ as te,d as le,s as Te,q as se,r as Z,V as ee,L as ie,aI as Ve,M as de,a as E,h as e,b as r,c as h,e as i,m as u,x as o,t as J,f as v,g as S,W as ne,F as y,y as I,ar as me,a2 as Be,U as ue,G as p,a0 as W,ah as _e,X as be,aK as ke,a1 as Ie,P as Ue,u as Ne,w as ze,o as Le,az as Re,aM as $e,aN as Oe,H as Pe,p as Me,l as je,E as Ye}from"./index.052afee0.js";const He={class:"flexBetween"},Je={class:"marginB20"},We=p(" \u5DF2\u9009\u62E9 "),qe={style:{color:"#0079fe"}},Xe=p(" \u6761\u8BB0\u5F55 "),Ge={class:"dialog-footer",style:{"text-align":"center"}},Ke=p("\u786E\u5B9A"),Qe=p("\u53D6\u6D88"),Ze=le({__name:"relationPop",emits:["success"],setup(D,{expose:b,emit:g}){Te(),se();const F=Z(ee),a=ie({title:"",visible:!1,formData:{keyWords:"",clientType:"",clientStar:"",salesStage:"",clinchRate:""},selectList:[],openType:"",tableCols:[],allTableCols:{1:[{label:"\u5BA2\u6237\u540D\u79F0",prop:"clientName",itemStyle:()=>"color:#0079FE;",handle:n=>Ve(n)},{label:"\u8054\u7CFB\u4EBA\u59D3\u540D",prop:"contactName"},{label:"\u8054\u7CFB\u4EBA\u53F7\u7801",prop:"cluePhone"},{label:"\u5BA2\u6237\u7C7B\u578B",prop:"clientType"},{label:"\u5BA2\u6237\u72B6\u6001",prop:"clientState"},{label:"\u5F52\u5C5E\u4EBA\u5458",prop:"belongUserName"}],2:[{label:"\u5BA2\u6237\u540D\u79F0",prop:"clientName",itemStyle:()=>"color:#0079FE;"},{label:"\u8054\u7CFB\u4EBA\u59D3\u540D",prop:"contactName"},{label:"\u8054\u7CFB\u4EBA\u53F7\u7801",prop:"cluePhone"},{label:"\u5F52\u5C5E\u4EBA\u5458",prop:"belongUserName"}],3:[{label:"\u5BA2\u6237\u540D\u79F0",prop:"clientName",itemStyle:()=>"color:#0079FE;"},{label:"\u8054\u7CFB\u4EBA\u59D3\u540D",prop:"contactName"},{label:"\u8054\u7CFB\u4EBA\u53F7\u7801",prop:"cluePhone"},{label:"\u5546\u673A\u9636\u6BB5",prop:"salesStage"},{label:"\u6210\u4EA4\u673A\u7387",prop:"clinchRate"},{label:"\u5F52\u5C5E\u4EBA\u5458",prop:"belongUserName"}],4:[{label:"\u5BA2\u6237\u540D\u79F0",prop:"clientName",itemStyle:()=>"color:#0079FE;"},{label:"\u8054\u7CFB\u4EBA\u59D3\u540D",prop:"contactName"},{label:"\u8054\u7CFB\u4EBA\u53F7\u7801",prop:"cluePhone"},{label:"\u5BA2\u6237\u7C7B\u578B",prop:"clientState"},{label:"\u5BA2\u6237\u72B6\u6001",prop:"clientStar"},{label:"\u5F52\u5C5E\u4EBA\u5458",prop:"contactName"}]},tableData:[],pagination:{pageSize:10,pageIndex:1,total:0}}),{title:M,visible:w,formData:_,tableCols:T,tableData:j,pagination:q,selectList:X,openType:N}=de(a);let G=async n=>{n==1?a.title="\u5173\u8054\u5BA2\u6237":n==2?a.title="\u5173\u8054\u7EBF\u7D22":n==3?a.title="\u6DFB\u52A0\u5546\u673A":n==4&&(a.title="\u6DFB\u52A0\u56E2\u961F"),a.tableCols=a.allTableCols[n],a.openType=n,a.visible=!0,x()},L=n=>{a.selectList=n.selection};function K(){var m;if(!((m=a.selectList)!=null&&m.length)){W.error("\u8BF7\u9009\u62E9\u8054\u7CFB\u4EBA!");return}let n=a.selectList.map(f=>({clientId:f.clientId,clientName:f.clientName,contactUserId:f.contactUserId,contactUserName:f.contactName,content:"",phoneNumber:f.cluePhone}));g("success",n),B()}const x=async()=>{var f,V,C,R,Y,$;let n={},{openType:m}=a;try{let k=JSON.parse(JSON.stringify(a.formData));k.current=a.pagination.pageIndex,k.size=a.pagination.pageSize,m==1?(n=await Q.clientContact(k),a.tableData=((V=(f=n==null?void 0:n.data)==null?void 0:f.records)==null?void 0:V.map(d=>H(P({},d),{clientType:findLabel(ne,d.clientType),clientState:findLabel(_e,d.clientState)})))||[]):m==2?(n=await Q.leadContact(k),a.tableData=((R=(C=n==null?void 0:n.data)==null?void 0:C.records)==null?void 0:R.map(d=>H(P({},d),{clueSource:findLabel(be,d.clueSource),clueState:findLabel(ke,d.clueState)})))||[]):m==3&&(n=await Q.opportunityContact(k),a.tableData=(($=(Y=n==null?void 0:n.data)==null?void 0:Y.records)==null?void 0:$.map(d=>H(P({},d),{salesStage:findLabel(me,d.salesStage),clinchRate:findLabel(Be,d.clinchRate)})))||[]),a.pagination.total=n.data.total||0}catch{a.tableData=[]}};function B(){a.visible=!1,a.title="",Object.assign(a.formData,{keyWords:"",clientType:"",clientStar:"",clueState:"",clueSource:"",salesStage:"",clinchRate:""}),a.tableData=[]}return b({init:G}),(n,m)=>{const f=E("el-option"),V=E("el-select"),C=E("el-form-item"),R=E("el-input"),Y=E("TableTemp"),$=E("el-button"),k=E("el-dialog");return e(w)?(r(),h(k,{key:0,title:e(M),modelValue:e(w),"onUpdate:modelValue":m[4]||(m[4]=d=>ue(w)?w.value=d:null),width:"900px",onClose:B,"close-on-click-modal":!1,"append-to-body":""},{footer:i(()=>[u("div",Ge,[o($,{type:"primary",onClick:K},{default:i(()=>[Ke]),_:1}),o($,{onClick:B},{default:i(()=>[Qe]),_:1})])]),default:i(()=>[u("div",He,[u("div",Je,[We,u("span",qe,J(e(X).length),1),Xe]),u("div",null,[o(e(ee),{ref_key:"dataFormRef",ref:F,model:e(_),inline:!0,"label-width":"130px"},{default:i(()=>[e(N)==1?(r(),h(C,{key:0},{default:i(()=>[o(V,{modelValue:e(_).clientType,"onUpdate:modelValue":m[0]||(m[0]=d=>e(_).clientType=d),style:{width:"180px"},placeholder:"\u5BA2\u6237\u7C7B\u578B",onChange:x},{default:i(()=>[(r(!0),v(y,null,S(e(ne),d=>(r(),h(f,{key:d.value,label:d.label,value:d.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):I("",!0),e(N)==2?(r(),v(y,{key:1},[],64)):I("",!0),e(N)==3?(r(),v(y,{key:2},[o(C,null,{default:i(()=>[o(V,{modelValue:e(_).salesStage,"onUpdate:modelValue":m[1]||(m[1]=d=>e(_).salesStage=d),style:{width:"180px"},placeholder:"\u5546\u673A\u9636\u6BB5",onChange:x},{default:i(()=>[(r(!0),v(y,null,S(e(me),d=>(r(),h(f,{key:d.value,label:d.label,value:d.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(C,null,{default:i(()=>[o(V,{modelValue:e(_).clinchRate,"onUpdate:modelValue":m[2]||(m[2]=d=>e(_).clinchRate=d),style:{width:"180px"},placeholder:"\u6210\u4EA4\u673A\u7387",onChange:x},{default:i(()=>[(r(!0),v(y,null,S(e(Be),d=>(r(),h(f,{key:d.value,label:d.label,value:d.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})],64)):I("",!0),o(C,null,{default:i(()=>[o(R,{onBlur:x,style:{width:"180px"},modelValue:e(_).keyWords,"onUpdate:modelValue":m[3]||(m[3]=d=>e(_).keyWords=d),placeholder:"\u641C\u7D22\u5173\u952E\u5B57"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),o(Y,{comheight:400,style:{width:"100%"},isBorder:!0,isSelection:!0,isIndex:!1,isPagination:!0,loading:!1,isHandle:!1,isShowPageBtn:!1,tableData:e(j),tableCols:e(T),pagination:e(q),onRefresh:x,onSelectChage:e(L)},null,8,["tableData","tableCols","pagination","onSelectChage"])]),_:1},8,["title","modelValue"])):I("",!0)}}});var eu=te(Ze,[["__scopeId","data-v-7eedee52"]]);const uu={class:"flexBetween"},tu={class:"marginB20"},lu=p(" \u6A21\u677F\u6570\u91CF: "),au={style:{color:"#0079fe"}},ou=le({__name:"seleTemp",emits:["success"],setup(D,{expose:b,emit:g}){se();const F=Z(ee),a=ie({title:"",visible:!1,formData:{keyWords:"",clientType:"",clientStar:""},selectList:[],openType:"",tableCols:[{label:"\u6A21\u677F\u5185\u5BB9",prop:"name"},{label:"\u64CD\u4F5C",type:"Button",width:"140px",btnList:[{label:"\u4F7F\u7528",type:"primary",size:"small",handle:(B,n)=>N(B)},{type:"primary",label:"\u590D\u5236",size:"small",handle:(B,n)=>G(B)}]}],allTableCols:{},tableData:[],pagination:{pageSize:10,pageIndex:1,total:0}}),{title:M,visible:w,formData:_,tableCols:T,tableData:j,pagination:q}=de(a);let X=async(B=[])=>{a.visible=!0,a.tableData=B};function N(B){g("success",B),x()}function G(B){const n=B.name;navigator.clipboard.writeText(n),W.success("\u590D\u5236\u6210\u529F\uFF01")}let L=B=>{a.selectList=B.selection};const K=async()=>{var n;let B=null;try{let m=JSON.parse(JSON.stringify(a.formData));m.current=a.pagination.pageIndex,m.size=a.pagination.pageSize,B=await Ie.getList(m),a.tableData=((n=B.data.records)==null?void 0:n.map(f=>P({},f)))||[],a.pagination.total=B.data.total||0}catch{a.tableData=[]}};function x(){a.visible=!1,a.title="",a.tableData=[]}return b({init:X}),(B,n)=>{const m=E("TableTemp"),f=E("el-dialog");return e(w)?(r(),h(f,{key:0,title:"\u9009\u62E9\u6A21\u677F",modelValue:e(w),"onUpdate:modelValue":n[0]||(n[0]=V=>ue(w)?w.value=V:null),width:"900px",onClose:x,"close-on-click-modal":!1,"append-to-body":""},{default:i(()=>[u("div",uu,[u("div",tu,[lu,u("span",au,J(e(j).length||0),1)]),u("div",null,[o(e(ee),{ref_key:"dataFormRef",ref:F,model:e(_),inline:!0,"label-width":"130px"},null,8,["model"])])]),o(m,{comheight:400,style:{width:"100%"},isBorder:!0,isSelection:!1,isIndex:!1,isPagination:!1,loading:!1,isHandle:!1,isShowPageBtn:!1,tableData:e(j),tableCols:e(T),pagination:e(q),onRefresh:K,onSelectChage:e(L)},null,8,["tableData","tableCols","pagination","onSelectChage"])]),_:1},8,["modelValue"])):I("",!0)}}});var nu=te(ou,[["__scopeId","data-v-067b84c5"]]);const su=Ue('<div class="marginB20" data-v-1d08bfcb><div class="tit marginB10" data-v-1d08bfcb>\u4F7F\u7528\u8BF4\u660E\uFF1A</div><div class="txt" data-v-1d08bfcb><div data-v-1d08bfcb>1\u3001\u53D1\u9001\u65F6\u5C06\u81EA\u52A8\u5728\u77ED\u4FE1\u524D\u6DFB\u52A0\u516C\u53F8\u540D\u79F0\u7B7E\u540D\uFF0C\u8BF7\u52FF\u624B\u52A8\u6DFB\u52A0\u3002</div><div data-v-1d08bfcb>2\u3001\u8BF7\u4E0D\u8981\u5728\u77ED\u4FE1\u5185\u5BB9\u4E2D\u586B\u5199\u7279\u6B8A\u5B57\u7B26\uFF0C\u5305\u62EC\u6362\u884C\u7B26\u3002</div><div data-v-1d08bfcb> 3\u3001\u77ED\u4FE1\u5185\u5BB9\u4E0D\u80FD\u591A\u4E8E65\u4E2A\u5B57\uFF08\u5176\u4E2D\u7A7A\u683C\u3001\u6570\u5B57\u3001\u5B57\u6BCD\u3001\u6C49\u5B57\u5747\u4E3A\u4E00\u4E2A\u5B57\uFF09 </div><div data-v-1d08bfcb>4\u3001\u540C\u4E00\u624B\u673A\u53F7\u95F4\u9694\u53D1\u9001\u65F6\u95F4\u4E0D\u5F97\u5C11\u4E8E20\u79D2</div><div data-v-1d08bfcb> 5\u3001\u7F16\u5199\u77ED\u4FE1\u65F6\u8BF7\u4ED4\u7EC6\u9605\u8BFB\u4E0B\u9762\u7684\u5185\u5BB9\u8BF4\u660E\uFF0C\u8BF7\u4E25\u683C\u6309\u7167\u7CFB\u7EDF\u8BBE\u5B9A\u6807\u51C6\u683C\u5F0F\u53D1\u9001\u77ED\u4FE1 </div><div data-v-1d08bfcb>6\u3001\u6700\u597D\u4E0D\u8981\u5728\u665A22:00\u81F3\u65E97:00\u65F6\u6BB5\u53D1\u9001\u77ED\u4FE1\uFF0C \u4EE5\u514D\u5F15\u8D77\u5BA2\u6237\u53CD\u611F</div></div></div><div class="marginB20" data-v-1d08bfcb><div class="tit marginB10" data-v-1d08bfcb>\u53D8\u91CF\u8BF4\u660E\uFF1A</div><div class="txt" data-v-1d08bfcb><div data-v-1d08bfcb> 1\u3001{\u79F0\u547C} \u8868\u793A\u4F01\u4E1A\u8054\u7CFB\u4EBA\u7684\u79F0\u547C\u6216\u4E2A\u4EBA\u5BA2\u6237\u7684\u79F0\u547C(\u5982\uFF1A\u738B\u603B,\u5468\u7ECF\u7406,\u5C31\u662F\u5BA2\u6237\u4FE1\u606F\u4E2D\u7684\u79F0\u547C\uFF0C\u5982\u679C\u4E3A\u7A7A\u5219\u53D1\u9001\u65F6\u4F1A\u663E\u793A\u8054\u7CFB\u4EBA\u540D) </div><div data-v-1d08bfcb>2\u3001{\u8054\u7CFB\u4EBA\u540D} \u8868\u793A\u4F01\u4E1A\u8054\u7CFB\u4EBA\u540D\u79F0\u6216\u4E2A\u4EBA\u5BA2\u6237\u7684\u540D\u79F0(\u5982\uFF1A\u5F20\u4E09)</div><div data-v-1d08bfcb>3\u3001{\u5BA2\u6237\u540D} \u8868\u793A\u4F01\u4E1A\u5BA2\u6237\u7684\u5BA2\u6237\u540D\u79F0(\u5982\uFF1A \u827E\u5FB7\u6C47\u8054\u79D1\u6280\u6709\u9650\u516C\u53F8 )</div></div></div><div class="marginB20" data-v-1d08bfcb><div class="tit marginB10" data-v-1d08bfcb>\u5185\u5BB9\u8BF4\u660E\uFF1A</div><div class="txt" data-v-1d08bfcb><div data-v-1d08bfcb> 1\u3001\u4E0D\u5F97\u53D1\u9001\u5305\u542B\u4EE5\u4E0B\u5185\u5BB9\uFF1A\u975E\u6CD5\u7684\u3001\u9A9A\u6270\u6027\u7684\u3001\u4E2D\u4F24\u4ED6\u4EBA\u7684\u3001\u8FB1\u9A82\u6027\u7684\u3001\u6050\u5413\u6027\u7684\u3001\u4F24\u5BB3\u6027\u7684\u3001\u5EB8\u4FD7\u7684\u3001\u6DEB\u79FD \u7684\u4FE1\u606F\uFF1B\u6559\u5506\u4ED6\u4EBA\u6784\u6210\u72AF\u7F6A\u884C\u4E3A\u7684\u4FE1\u606F\u3001 \u5371\u5BB3\u56FD\u5BB6\u5B89\u5168\u7684\u4FE1\u606F\uFF1B\u53CA\u4EFB\u4F55\u4E0D\u7B26\u5408\u56FD\u5BB6\u6CD5\u5F8B\u3001\u56FD\u9645\u60EF\u4F8B\u3001\u5730\u65B9\u6CD5\u5F8B\u89C4\u5B9A\u7684\u4FE1\u606F\u3002 </div><div data-v-1d08bfcb> 2\u3001\u4E0D\u80FD\u8FDD\u53CD\u8FD0\u8425\u5546\u89C4\u5B9A\uFF0C\u4E0D\u5F97\u53D1\u9001\u7ADE\u4E89\u5BF9\u624B\u4EA7\u54C1\u7684\u5E7F\u544A\uFF0C\u4E0D\u80FD\u6309\u624B\u673A\u53F7\u6BB5\u5F62\u5F0F\u8FDB\u884C\u5E7F\u544A\u4E1A\u52A1\u7684\u5BA3\u4F20\u7B49\uFF0C\u4E0D\u80FD\u53D1\u9001\u4E0E\u672C\u884C\u4E1A\u65E0\u5173\u548C\u79FB\u52A8\u8FD0\u8425\u5546\u9650\u5236\u548C\u7981\u6B62\u53D1\u9001\u7684\u77ED\u4FE1\u5185\u5BB9\uFF0C \u7279\u522B\u662F\u5E7F\u544A\u7C7B\u4FE1\u606F\uFF0C\u7FA4\u53D1\u77ED\u4FE1\u7B49\uFF0C\u5BF9\u8FDD\u53CD\u6B64\u58F0\u660E\u4EA7\u751F\u7684\u4E00\u5207\u540E\u679C\u7531\u53D1\u9001\u8005\u53CA\u5176\u5355\u4F4D\u627F\u62C5\u3002 </div></div></div>',3),iu=le({__name:"tips",setup(D){return(b,g)=>su}});var du=te(iu,[["__scopeId","data-v-1d08bfcb"]]);const U=D=>(Me("data-v-9a6ec5aa"),D=D(),je(),D),ru={class:"main",style:{position:"relative"}},cu=U(()=>u("div",null,[u("span",null,"\u63A5\u6536\u53F7\u7801")],-1)),pu={style:{width:"100%"}},Fu={key:0},mu={class:"marginB10"},Bu=p("\u6DFB\u52A0\u5BA2\u6237\u8054\u7CFB\u4EBA"),_u={class:"marginB10"},bu=p("\u6DFB\u52A0\u7EBF\u7D22\u8054\u7CFB\u4EBA"),vu={class:"marginB10"},Eu=p("\u6DFB\u52A0\u5546\u673A\u8054\u7CFB\u4EBA"),fu={class:"marginB20"},Du={class:"txt"},gu=p(" \u2022 \u6DFB\u52A0\u53F7\u7801\u6570\u91CF\uFF1A"),hu={style:{color:"red"}},Au=U(()=>u("div",null,[p(" \u2022 \u6700\u591A\u540C\u65F6\u53EF\u53D1\u9001"),u("span",{style:{color:"red"}},"1000"),p("\u4E2A\u53F7\u7801 ")],-1)),yu={key:1},Cu={class:"marginB20"},xu=U(()=>u("div",{class:"txt"},[u("div",null,"\u2022 \u8BF7\u4EE5\u6362\u884C\u95F4\u9694\u6BCF\u4E2A\u624B\u673A\u53F7\u7801"),u("div",null,[p("\u2022 \u6709\u6548\u53F7\u7801\u6570\u91CF\uFF1A"),u("span",{style:{color:"red"}},"1000")]),u("div",null,[p("\u2022 \u65E0\u6548\u53F7\u7801\u6570\u91CF\uFF1A"),u("span",{style:{color:"red"}},"1000")]),u("div",null,[p(" \u2022 \u6700\u591A\u540C\u65F6\u53EF\u53D1\u9001"),u("span",{style:{color:"red"}},"1000"),p("\u4E2A\u53F7\u7801 ")])],-1)),Su={key:2},wu=U(()=>u("div",{class:"txt"},[u("div",null,[p(" \u2022 \u7B26\u5408\u6761\u4EF6\u53F7\u7801\u6570\u91CF:"),u("span",{style:{color:"red"}},"1000")]),u("div",null,[p(" \u2022 \u6700\u591A\u540C\u65F6\u53EF\u53D1\u9001"),u("span",{style:{color:"red"}},"1000"),p("\u4E2A\u53F7\u7801 ")])],-1)),Tu={key:3},Vu=U(()=>u("div",{class:"txt"},[u("div",null,"\u2022 \u8BF7\u9009\u62E9\u5E76\u4E0A\u4F20\u4FDD\u5B58\u624B\u673A\u53F7\u5217\u8868\u7684\u6587\u4EF6"),u("div",null,"\u2022 \u4EC5\u652F\u6301\u4E0A\u4F20.txt\u683C\u5F0F"),u("div",null,"\u2022 \u8BF7\u4EE5\u6362\u884C\u95F4\u9694\u6BCF\u4E2A\u63A5\u6536\u5BF9\u8C61")],-1)),ku={key:4},Iu={class:"marginB10"},Uu=p("\u6DFB\u52A0\u56E2\u961F\u6210\u5458"),Nu={class:"marginB20"},zu=U(()=>u("div",{class:"txt"},[u("div",null,[p("\u2022 \u6DFB\u52A0\u53F7\u7801\u6570\u91CF\uFF1A"),u("span",{style:{color:"red"}},"1000")]),u("div",null,[p(" \u2022 \u6700\u591A\u540C\u65F6\u53EF\u53D1\u9001"),u("span",{style:{color:"red"}},"1000"),p("\u4E2A\u53F7\u7801 ")])],-1)),Lu=U(()=>u("div",{class:"card-header"},[u("span",null,"\u7FA4\u53D1\u77ED\u4FE1")],-1)),Ru={class:"flexBetween"},$u=U(()=>u("div",{class:"marginB20"},[u("span",{style:{color:"#d9001b"}},"*"),p(" \u8BF7\u9009\u62E9\u5206\u7C7B\u548C\u7B7E\u540D ")],-1)),Ou=p("\u6DFB\u52A0"),Pu={class:"marginB20"},Mu=p(" \u5269\u4F59\u53EF\u7528\u4F59\u989D "),ju={style:{color:"red"}},Yu=U(()=>u("div",null,[u("div",{class:"marginB20"},[u("span",{style:{color:"#d9001b"}},"*"),p("\u8BF7\u9009\u62E9\u77ED\u4FE1\u6A21\u677F ")])],-1)),Hu={class:"marginB20"},Ju={class:"flexBetween marginB20"},Wu=p("\u4ECE\u77ED\u4FE1\u6A21\u677F\u5E93\u9009\u62E9"),qu={class:"flexStart"},Xu={class:"marginR10"},Gu=p(" \u5B57\u6570:"),Ku={style:{color:"red"}},Qu=p("\u4E2A "),Zu=p(" \u8BA1\u8D39\u6761\u6570:"),et={style:{color:"red"}},ut={class:"flexBetween marginB20"},tt=p("\u63D0\u4EA4\u5BA1\u6838"),lt=le({__name:"index",setup(D){const{app:b,user:g}=se();Ne();const F=ie({activeName:"1",appTableData:[],signaTableData:[],tableData:[],searchData:{yeTypebelongUserId:"0"},formData:{signatureId:"",smsTypeId:"",sendTime:"",content:"",smsContentDTOS:[]},pickerOptions:{disabledDate(s){return s.getTime()<Date.now()-864e5}},smsTxt:"",smsTit:"",leftList:[],leftTxt:"",options:[{label:"\u6839\u636E\u4E1A\u52A1\u6DFB\u52A0",value:"0"}],zdkhData:{clientState:"",clientType:"",clientStar:"",clueSource:"",enterpriseSize:"",zdgzaaa:""},buttonObj:{txt:"100",num:"2"},balance:""}),{zdkhData:a,smsTxt:M,smsTit:w,searchData:_,formData:T,options:j,appTableData:q,signaTableData:X,buttonObj:N,leftList:G,leftTxt:L,pickerOptions:K,balance:x}=de(F);ze(()=>F.smsTxt,(s,l)=>{var A;let c=(s==null?void 0:s.length)+((A=F.smsTit)==null?void 0:A.length);F.buttonObj.txt=c,F.buttonObj.num=c<=70?c<=0?0:1:Math.ceil(c/67)},{immediate:!0,deep:!0});const B=Z(null),n=Z(null);Le(()=>{let s=JSON.parse(sessionStorage.getItem("smsData"));if(s!=null&&s.length){s=s.filter(c=>c.cluePhone);let l=[];s.forEach(c=>{var O;let z=((O=c.cluePhone)==null?void 0:O.split(",")).map(ae=>({clientId:c.clientId,clientName:c.clientName,contactUserId:c.contactUserId,contactUserName:c.contactName,content:"",phoneNumber:ae}));l.push(...z)}),R(l)}m(),V(),oe.getAllList().then(l=>{F.appTableData=l.data})});let m=async()=>{},f=s=>{new FormData().append("file",s)};const V=()=>{Q.queryMoney(g.userInfo.companyId).then(s=>{F.balance=s.data})},C=(s=1)=>{var l;(l=B==null?void 0:B.value)==null||l.init(s)},R=s=>{F.leftList=s;let l=s.map(c=>c.phoneNumber);F.leftTxt=l.join(",")},Y=()=>{var s;(s=n==null?void 0:n.value)==null||s.init(F.tableData)},$=s=>{F.smsTxt=`${s.name}`,F.formData.content=s.name};let k=s=>{oe.allSignature(s).then(l=>{F.signaTableData=l.data}),F.smsTit="",F.smsTxt="",Object.assign(F.formData,{signatureId:""}),ve(s)},d=s=>{if(s){let l=F.signaTableData.find(c=>c.id==s);F.smsTit=`\u3010${l.name}\u3011`}else F.smsTit=""},ve=s=>{oe.allTemp(s).then(l=>{F.tableData=l.data.map(c=>H(P({},c),{checked:!1}))})};function Ee(){var l;F.formData.content=F.smsTxt||"";let s=JSON.parse(JSON.stringify(F.formData));if(!s.smsTypeId){W.error("\u8BF7\u9009\u62E9\u77ED\u4FE1\u5206\u7C7B!");return}if(!s.signatureId){W.error("\u8BF7\u9009\u62E9\u7B7E\u540D!");return}if(!s.content){W.error("\u8BF7\u586B\u5199\u6A21\u677F\u5185\u5BB9!");return}if(!((l=F.leftList)!=null&&l.length)){W.error("\u8BF7\u9009\u62E9\u8054\u7CFB\u4EBA!");return}Ye.confirm("\u662F\u5426\u63D0\u4EA4\u5BA1\u6838?","\u64CD\u4F5C\u786E\u8BA4").then(()=>{s.smsContentDTOS=F.leftList.map(c=>H(P({},c),{content:s.content}))}).catch(()=>{})}function fe(){window.open(`${b.smsApi}/#/product/interfaceMsg`)}return(s,l)=>{const c=E("el-option"),A=E("el-select"),z=E("el-button"),O=E("el-input"),ae=E("UploadBotton"),re=E("el-card"),ce=E("el-col"),De=E("el-link"),ge=E("el-date-picker"),he=E("el-row"),Ae=Re("has-perm");return r(),v("div",ru,[o(he,{gutter:20,style:{height:"100%"}},{default:i(()=>[o(ce,{span:6},{default:i(()=>[o(re,{class:"item_box",shadow:"never"},{header:i(()=>[cu]),default:i(()=>[u("div",pu,[o(A,{modelValue:e(_).yeTypebelongUserId,"onUpdate:modelValue":l[0]||(l[0]=t=>e(_).yeTypebelongUserId=t),style:{width:"100%"},class:"marginB20",placeholder:"\u6839\u636E\u4E1A\u52A1\u6DFB\u52A0"},{default:i(()=>[(r(!0),v(y,null,S(e(j),t=>(r(),h(c,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e(_).yeTypebelongUserId=="0"?(r(),v("div",Fu,[u("div",mu,[o(z,{type:"primary",style:{width:"100%",margin:"0"},icon:"Plus",onClick:l[1]||(l[1]=t=>C(1))},{default:i(()=>[Bu]),_:1})]),u("div",_u,[o(z,{type:"primary",style:{width:"100%",margin:"0"},icon:"Plus",onClick:l[2]||(l[2]=t=>C(2))},{default:i(()=>[bu]),_:1})]),u("div",vu,[o(z,{type:"primary",style:{width:"100%",margin:"0"},icon:"Plus",onClick:l[3]||(l[3]=t=>C(3))},{default:i(()=>[Eu]),_:1})]),u("div",fu,[o(O,{modelValue:e(L),"onUpdate:modelValue":l[4]||(l[4]=t=>ue(L)?L.value=t:null),type:"textarea",rows:6,maxlength:"300",disabled:!0,"show-word-limit":"",placeholder:"",autosize:{minRows:20,maxRows:20}},null,8,["modelValue"])]),u("div",Du,[u("div",null,[gu,u("span",hu,J(e(G).length||0),1)]),Au])])):I("",!0),e(_).yeTypebelongUserId=="1"?(r(),v("div",yu,[u("div",Cu,[o(O,{modelValue:e(_).description,"onUpdate:modelValue":l[5]||(l[5]=t=>e(_).description=t),type:"textarea",rows:6,maxlength:"300","show-word-limit":"",placeholder:"",autosize:{minRows:20,maxRows:20}},null,8,["modelValue"])]),xu])):I("",!0),e(_).yeTypebelongUserId=="2"?(r(),v("div",Su,[o(A,{modelValue:e(a).clientState,"onUpdate:modelValue":l[6]||(l[6]=t=>e(a).clientState=t),style:{width:"100%"},class:"marginB10",placeholder:"\u5BA2\u6237\u72B6\u6001"},{default:i(()=>[(r(!0),v(y,null,S(e(_e),t=>(r(),h(c,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),o(A,{modelValue:e(a).clientType,"onUpdate:modelValue":l[7]||(l[7]=t=>e(a).clientType=t),style:{width:"100%"},class:"marginB10",placeholder:"\u5BA2\u6237\u7C7B\u578B"},{default:i(()=>[(r(!0),v(y,null,S(e(ne),t=>(r(),h(c,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),o(A,{modelValue:e(a).clientStar,"onUpdate:modelValue":l[8]||(l[8]=t=>e(a).clientStar=t),style:{width:"100%"},class:"marginB10",placeholder:"\u5BA2\u6237\u661F\u7EA7"},{default:i(()=>[(r(!0),v(y,null,S(e($e),t=>(r(),h(c,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),o(A,{modelValue:e(a).clueSource,"onUpdate:modelValue":l[9]||(l[9]=t=>e(a).clueSource=t),style:{width:"100%"},class:"marginB10",placeholder:"\u5BA2\u6237\u6765\u6E90"},{default:i(()=>[(r(!0),v(y,null,S(e(be),t=>(r(),h(c,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),o(A,{modelValue:e(a).enterpriseSize,"onUpdate:modelValue":l[10]||(l[10]=t=>e(a).enterpriseSize=t),style:{width:"100%"},class:"marginB10",placeholder:"\u4F01\u4E1A\u89C4\u6A21"},{default:i(()=>[(r(!0),v(y,null,S(e(Oe),t=>(r(),h(c,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),o(A,{modelValue:e(a).zdgzaaa,"onUpdate:modelValue":l[11]||(l[11]=t=>e(a).zdgzaaa=t),style:{width:"100%"},class:"marginB20",placeholder:"\u5173\u6CE8\u72B6\u6001"},{default:i(()=>[o(c,{label:"\u91CD\u70B9\u5173\u6CE8",value:"0"}),o(c,{label:"\u975E\u91CD\u70B9\u5173\u6CE8",value:"1"})]),_:1},8,["modelValue"]),wu])):I("",!0),e(_).yeTypebelongUserId=="3"?(r(),v("div",Tu,[o(ae,{isCustomUpload:!0,title:"\u4E0A\u4F20\u5BFC\u5165\u6587\u4EF6",onSuccess:e(f),style:{width:"100%"},class:"marginB20"},null,8,["onSuccess"]),Vu])):I("",!0),e(_).yeTypebelongUserId=="4"?(r(),v("div",ku,[u("div",Iu,[o(z,{type:"primary",style:{width:"100%",margin:"0"},icon:"Plus",onClick:l[12]||(l[12]=t=>C(1))},{default:i(()=>[Uu]),_:1})]),u("div",Nu,[o(O,{modelValue:e(_).description,"onUpdate:modelValue":l[13]||(l[13]=t=>e(_).description=t),type:"textarea",rows:6,maxlength:"300",disabled:!0,"show-word-limit":"",placeholder:"",autosize:{minRows:20,maxRows:20}},null,8,["modelValue"])]),zu])):I("",!0)])]),_:1})]),_:1}),o(ce,{span:18},{default:i(()=>[o(re,{class:"item_box",shadow:"never"},{header:i(()=>[Lu]),default:i(()=>[u("div",null,[u("div",Ru,[u("div",null,[$u,u("div",null,[o(A,{modelValue:e(T).smsTypeId,"onUpdate:modelValue":l[14]||(l[14]=t=>e(T).smsTypeId=t),style:{width:"180px","margin-right":"20px"},class:"marginB20",onChange:e(k),placeholder:"\u9009\u62E9\u5206\u7C7B"},{default:i(()=>[(r(!0),v(y,null,S(e(q),t=>(r(),h(c,{label:t.name,value:t.id,key:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),o(A,{modelValue:e(T).signatureId,"onUpdate:modelValue":l[15]||(l[15]=t=>e(T).signatureId=t),style:{width:"180px","margin-right":"20px"},class:"marginB20",onChange:e(d),placeholder:"\u9009\u62E9\u7B7E\u540D"},{default:i(()=>[(r(!0),v(y,null,S(e(X),t=>(r(),h(c,{label:t.name,value:t.id,key:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),Pe((r(),h(z,{type:"primary",onClick:fe},{default:i(()=>[Ou]),_:1})),[[Ae,"sms:smsbiz"]])])]),u("div",Pu,[Mu,u("span",ju,J(e(x)||0)+"\uFFE5",1)])]),Yu,u("div",Hu,[o(O,{modelValue:e(M),"onUpdate:modelValue":l[16]||(l[16]=t=>ue(M)?M.value=t:null),type:"textarea",rows:6,maxlength:"300","show-word-limit":"",placeholder:"",autosize:{minRows:6,maxRows:6}},null,8,["modelValue"])]),u("div",Ju,[u("div",null,[o(De,{type:"primary",onClick:Y},{default:i(()=>[Wu]),_:1})]),u("div",qu,[u("div",Xu,[Gu,u("span",Ku,J(e(N).txt),1),Qu]),u("div",null,[Zu,u("span",et,J(e(N).num),1)])])]),u("div",ut,[u("div",null,[o(ge,{modelValue:e(T).sendTime,"onUpdate:modelValue":l[17]||(l[17]=t=>e(T).sendTime=t),"picker-options":e(K),style:{width:"200px"},format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss",type:"datetime",placeholder:"\u53D1\u9001\u65F6\u95F4"},null,8,["modelValue","picker-options"])]),u("div",null,[o(z,{type:"primary",onClick:l[18]||(l[18]=t=>Ee())},{default:i(()=>[tt]),_:1})])]),o(du)])]),_:1})]),_:1})]),_:1}),o(eu,{ref_key:"relationRef",ref:B,onSuccess:R},null,512),o(nu,{ref_key:"seleTempRef",ref:n,onSuccess:$},null,512)])}}});var it=te(lt,[["__scopeId","data-v-9a6ec5aa"]]);export{it as default};
