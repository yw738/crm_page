var Pe=Object.defineProperty,Je=Object.defineProperties;var qe=Object.getOwnPropertyDescriptors;var Fe=Object.getOwnPropertySymbols;var Re=Object.prototype.hasOwnProperty,Me=Object.prototype.propertyIsEnumerable;var be=(_,v,m)=>v in _?Pe(_,v,{enumerable:!0,configurable:!0,writable:!0,value:m}):_[v]=m,ie=(_,v)=>{for(var m in v||(v={}))Re.call(v,m)&&be(_,m,v[m]);if(Fe)for(var m of Fe(v))Me.call(v,m)&&be(_,m,v[m]);return _},fe=(_,v)=>Je(_,qe(v));import"./dict.c33b8edc.js";import{p as me,q as U,w as _e}from"./product.c89f43f1.js";import{_ as Z,d as ee,q as ye,r as P,V as H,L as te,M as le,a as d,h as e,b as g,c as I,e as u,m as c,x as t,U as K,f as W,g as Ce,F as de,y as G,p as he,l as ge,G as C,a5 as De,a0 as k,t as M,E as Y,A as We,az as Ge,H as j}from"./index.052afee0.js";import{U as He}from"./index.72de21bc.js";import"./index.4950eb20.js";const Ke=_=>(he("data-v-28c28f54"),_=_(),ge(),_),Qe={class:"flexStart"},Xe=Ke(()=>c("div",{class:"marginL10"},"\u5143",-1)),Ye={class:"dialog-footer",style:{"text-align":"center"}},Ze=C("\u4FDD\u5B58"),et=C("\u53D6\u6D88"),tt=ee({__name:"add",props:{treeData:{type:Array,default:()=>[]},pid:{type:String,default:""}},emits:["success"],setup(_,{expose:v,emit:m}){const E=_;ye();const p=P(H),o=te({title:"",visible:!1,formData:{productId:"",multipartFile:"",productName:"",productClassifyId:"",productNumber:"",standardPrice:0,productSpecification:"",remark:""},rules:{productName:[{required:!0,message:"\u8BF7\u8F93\u5165\u4EA7\u54C1\u540D\u79F0",trigger:"blur"}],productClassifyId:[{required:!0,message:"\u8BF7\u9009\u62E9\u6240\u5C5E\u5206\u7C7B",trigger:"blur"}],productNumber:[{required:!0,message:"\u8BF7\u8F93\u5165\u4EA7\u54C1\u7F16\u53F7",trigger:"blur"}],standardPrice:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u51C6\u5355\u4EF7",trigger:"blur"}],productSpecification:[{required:!0,message:"\u8BF7\u9009\u62E9\u4EA7\u54C1\u89C4\u683C",trigger:"blur"}]},options:[],props1:{checkStrictly:!0,value:"productClassifyId",label:"classifyName",children:"childProductClassifyList"},fileIdList:[],openType:""}),{title:x,visible:b,formData:l,rules:A,fileIdList:B,options:N,props1:T}=le(o);let J=async(r,i={})=>{De.getType().then(w=>o.options=w.data),r=="edit"?(o.title="\u4FEE\u6539\u4EA7\u54C1",await U.getDetail(i.productId).then(w=>{Object.assign(o.formData,ie({},w.data))})):(o.title="\u6DFB\u52A0\u4EA7\u54C1",Object.assign(o.formData,{productClassifyId:E.pid})),o.openType=r,o.visible=!0};function V(){let r=JSON.parse(JSON.stringify(o.formData)),i;r.productClassifyId instanceof Array&&(i=r.productClassifyId[r.productClassifyId.length-1],r.productClassifyId=i),U.add(r).then(()=>{k.success("\u65B0\u589E\u6210\u529F\uFF01"),n(),m("success")})}function D(){let r=JSON.parse(JSON.stringify(o.formData)),i;r.productClassifyId instanceof Array&&(i=r.productClassifyId[r.productClassifyId.length-1],r.productClassifyId=i),U.update(r).then(()=>{k.success("\u7F16\u8F91\u6210\u529F\uFF01"),n(),m("success")})}function s(){p.value.validate(r=>{r&&(o.openType=="edit"?D():V())})}function n(){p.value.resetFields(),o.visible=!1,o.title="",Object.assign(o.formData,{productId:"",multipartFile:"",productName:"",productClassifyId:"",productNumber:"",standardPrice:0,productSpecification:"",remark:""})}return v({init:J}),(r,i)=>{const w=d("CustomUpload"),S=d("el-form-item"),L=d("el-input"),Q=d("el-cascader"),q=d("el-input-number"),X=d("el-option"),ne=d("el-select"),ae=d("el-button"),ue=d("el-dialog");return e(b)?(g(),I(ue,{key:0,title:e(x),modelValue:e(b),"onUpdate:modelValue":i[7]||(i[7]=F=>K(b)?b.value=F:null),width:"500px",onClose:n,"close-on-click-modal":!1,"append-to-body":""},{footer:u(()=>[c("div",Ye,[t(ae,{type:"primary",onClick:s},{default:u(()=>[Ze]),_:1}),t(ae,{onClick:n},{default:u(()=>[et]),_:1})])]),default:u(()=>[t(e(H),{ref_key:"dataFormRef",ref:p,model:e(l),rules:e(A),"label-width":"130px"},{default:u(()=>[t(S,{label:"\u4EA7\u54C1\u56FE\u7247:"},{default:u(()=>[t(w,{isUploadImg:!0,fileIdList:e(B),"onUpdate:fileIdList":i[0]||(i[0]=F=>K(B)?B.value=F:null)},null,8,["fileIdList"])]),_:1}),t(S,{label:"\u4EA7\u54C1\u540D\u79F0:",prop:"productName"},{default:u(()=>[t(L,{modelValue:e(l).productName,"onUpdate:modelValue":i[1]||(i[1]=F=>e(l).productName=F),placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue"])]),_:1}),t(S,{label:"\u6240\u5C5E\u5206\u7C7B:",prop:"productClassifyId"},{default:u(()=>[t(Q,{modelValue:e(l).productClassifyId,"onUpdate:modelValue":i[2]||(i[2]=F=>e(l).productClassifyId=F),options:e(N),props:e(T),style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9"},null,8,["modelValue","options","props"])]),_:1}),t(S,{label:"\u4EA7\u54C1\u7F16\u53F7:",prop:"productNumber"},{default:u(()=>[t(L,{modelValue:e(l).productNumber,"onUpdate:modelValue":i[3]||(i[3]=F=>e(l).productNumber=F),placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue"])]),_:1}),t(S,{label:"\u6807\u51C6\u5355\u4EF7:",prop:"standardPrice"},{default:u(()=>[c("div",Qe,[c("div",null,[t(q,{modelValue:e(l).standardPrice,"onUpdate:modelValue":i[4]||(i[4]=F=>e(l).standardPrice=F),min:0,step:.01,"step-strictly":!0,max:1e17,style:{width:"200px"},"controls-position":"right"},null,8,["modelValue","step"])]),Xe])]),_:1}),t(S,{label:"\u4EA7\u54C1\u89C4\u683C:",prop:"productSpecification"},{default:u(()=>[t(ne,{modelValue:e(l).productSpecification,"onUpdate:modelValue":i[5]||(i[5]=F=>e(l).productSpecification=F),style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9"},{default:u(()=>[(g(!0),W(de,null,Ce(e(me),F=>(g(),I(X,{key:F.value,label:F.label,value:F.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(S,{label:"\u5907\u6CE8:"},{default:u(()=>[t(L,{modelValue:e(l).remark,"onUpdate:modelValue":i[6]||(i[6]=F=>e(l).remark=F),type:"textarea",rows:6,placeholder:"\u8BF7\u8F93\u5165",autosize:{minRows:4,maxRows:4}},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])):G("",!0)}}});var Ee=Z(tt,[["__scopeId","data-v-28c28f54"]]);const lt=C("\u8BBE\u7F6E\u4E3A\u6700\u9876\u5C42"),at={class:"dialog-footer",style:{"text-align":"center"}},ut=C("\u4FDD\u5B58"),ot=C("\u53D6\u6D88"),st=ee({__name:"addTreeType",emits:["success"],setup(_,{expose:v,emit:m}){const E=P(H),p=te({title:"",visible:!1,formData:{pName:"",pid:"",classifyName:"",productClassifyId:""},rules:{classifyName:[{required:!0,message:"\u8BF7\u8F93\u5165\u5206\u7C7B\u540D\u79F0",trigger:"blur"}]},openType:""}),{title:o,visible:x,formData:b,rules:l,openType:A}=le(p);let B=async(s,n={})=>{s=="edit"?(p.title="\u7F16\u8F91\u5206\u7C7B",Object.assign(p.formData,{productClassifyId:n.productClassifyId,classifyName:n.classifyName})):(p.title="\u65B0\u589E\u5B50\u96C6\u5206\u7C7B",Object.assign(p.formData,n)),p.openType=s,p.visible=!0},N=()=>{p.formData.pName="\u9876\u5C42",p.formData.pid="-1"};function T(){let s=JSON.parse(JSON.stringify(p.formData));delete s.pName,delete s.productClassifyId,U.addType(s).then(()=>{k.success("\u65B0\u589E\u6210\u529F\uFF01"),D(),m("success")})}function J(){let s=JSON.parse(JSON.stringify(p.formData));delete s.pName,delete s.pid,U.updateType(s).then(()=>{k.success("\u7F16\u8F91\u6210\u529F\uFF01"),D(),m("success")})}function V(){E.value.validate(s=>{s&&(p.openType=="edit"?J():T())})}function D(){E.value.resetFields(),p.visible=!1,Object.assign(p.formData,{pName:"",pid:"",classifyName:"",productClassifyId:""})}return v({init:B}),(s,n)=>{const r=d("el-button"),i=d("el-form-item"),w=d("el-input"),S=d("el-dialog");return e(x)?(g(),I(S,{key:0,title:e(o),modelValue:e(x),"onUpdate:modelValue":n[1]||(n[1]=L=>K(x)?x.value=L:null),width:"500px",onClose:D,"close-on-click-modal":!1,"append-to-body":""},{footer:u(()=>[c("div",at,[t(r,{type:"primary",onClick:V},{default:u(()=>[ut]),_:1}),t(r,{onClick:D},{default:u(()=>[ot]),_:1})])]),default:u(()=>[t(e(H),{ref_key:"dataFormRef",ref:E,model:e(b),rules:e(l),"label-width":"130px"},{default:u(()=>[e(A)=="add"?(g(),I(i,{key:0,label:"\u4E0A\u7EA7\u4EA7\u54C1\u5206\u7C7B:"},{default:u(()=>[C(M(e(b).pName)+" ",1),e(b).pid!="-1"?(g(),I(r,{key:0,size:"small",class:"marginL20",type:"primary",onClick:e(N)},{default:u(()=>[lt]),_:1},8,["onClick"])):G("",!0)]),_:1})):G("",!0),t(i,{label:"\u4EA7\u54C1\u5206\u7C7B\u540D\u79F0:",prop:"classifyName"},{default:u(()=>[t(w,{modelValue:e(b).classifyName,"onUpdate:modelValue":n[0]||(n[0]=L=>e(b).classifyName=L),placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])):G("",!0)}}});var it=Z(st,[["__scopeId","data-v-d501507a"]]);const dt={class:"dialog-footer",style:{"text-align":"center"}},nt=C("\u4FDD\u5B58"),rt=C("\u53D6\u6D88"),ct=ee({__name:"updateType",props:{treeData:{type:Array,default:()=>[]},pid:{type:String,default:""}},emits:["success"],setup(_,{expose:v,emit:m}){const E=_,p=P(H),o=te({visible:!1,formData:{productClassifyId:""},rules:{productClassifyId:[{required:!0,message:"\u8BF7\u9009\u62E9\u5206\u7C7B",trigger:"blur"}]},options:[],props1:{checkStrictly:!0,value:"productClassifyId",label:"classifyName",children:"childProductClassifyList"},selArr:[]}),{visible:x,formData:b,rules:l,options:A,props1:B}=le(o);let N=async(D={},s=[])=>{o.selArr=s,Object.assign(o.formData,D),o.options=E.treeData,o.visible=!0};function T(){let D=JSON.parse(JSON.stringify(o.formData)),s=o.selArr.map(r=>r.productId),n=D.productClassifyId[D.productClassifyId.length-1];U.allUpdateclass({productIds:s,productClassifyIds:n}).then(()=>{k.success("\u4FEE\u6539\u4EA7\u54C1\u5206\u7C7B\u6210\u529F\uFF01"),V(),m("success")})}function J(){p.value.validate(D=>{D&&T()})}function V(){p.value.resetFields(),o.visible=!1,Object.assign(o.formData,{productClassifyId:""})}return v({init:N}),(D,s)=>{const n=d("el-cascader"),r=d("el-form-item"),i=d("el-button"),w=d("el-dialog");return e(x)?(g(),I(w,{key:0,title:"\u4FEE\u6539\u5206\u7C7B",modelValue:e(x),"onUpdate:modelValue":s[1]||(s[1]=S=>K(x)?x.value=S:null),width:"500px",onClose:V,"close-on-click-modal":!1,"append-to-body":""},{footer:u(()=>[c("div",dt,[t(i,{type:"primary",onClick:J},{default:u(()=>[nt]),_:1}),t(i,{onClick:V},{default:u(()=>[rt]),_:1})])]),default:u(()=>[t(e(H),{ref_key:"dataFormRef",ref:p,model:e(b),rules:e(l),"label-width":"130px"},{default:u(()=>[t(r,{label:"\u6240\u5C5E\u5206\u7C7B:",prop:"productClassifyId"},{default:u(()=>[t(n,{modelValue:e(b).productClassifyId,"onUpdate:modelValue":s[0]||(s[0]=S=>e(b).productClassifyId=S),options:e(A),props:e(B),style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9"},null,8,["modelValue","options","props"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])):G("",!0)}}});var pt=Z(ct,[["__scopeId","data-v-42d36e4c"]]);const xe=_=>(he("data-v-fcc81adc"),_=_(),ge(),_),ft={class:"flexBetween"},_t={class:"flexStart"},mt={class:"marginL20"},yt={class:"flexStart marginB20"},Ct={class:"marginR30 detail_title"},ht={key:0},gt=xe(()=>c("span",{class:"round success"},null,-1)),vt=C(" \u4E0A\u67B6"),Ft=[gt,vt],bt={key:1},Dt=xe(()=>c("span",{class:"round error"},null,-1)),Et=C(" \u4E0B\u67B6"),xt=[Dt,Et],St={class:"flexStart"},It={class:"marginR30"},kt=C(" \u4EA7\u54C1\u5206\u7C7B\uFF1A"),Bt={class:"txt"},wt=C(" \u4EA7\u54C1\u7F16\u53F7\uFF1A"),At={class:"txt"},Nt=C("\u7F16\u8F91\u4EA7\u54C1"),Vt=C("\u4FEE\u6539\u72B6\u6001"),$t=C("\u5220\u9664\u4EA7\u54C1"),Ut={class:"cell-item"},Tt=ee({__name:"detail",props:{treeData:{type:Array,default:()=>[]},pid:{type:String,default:""}},emits:["success"],setup(_,{expose:v,emit:m}){const E=_;ye();const p=P(null),o=te({title:"\u4EA7\u54C1\u8BE6\u60C5",visible:!1,formData:{},jbInfoCal:[{label:"\u4EA7\u54C1\u540D\u79F0",value:"productName"},{label:"\u6240\u5C5E\u5206\u7C7B",value:"classifyName"},{label:"\u4EA7\u54C1\u7F16\u53F7",value:"productNumber"},{label:"\u6807\u51C6\u5355\u4EF7",value:"standardPrice"},{label:"\u4EA7\u54C1\u89C4\u683C",value:"productSpecification"},{label:"\u5907\u6CE8\u4FE1\u606F",value:"remark"},{label:"\u521B\u5EFA\u65F6\u95F4",value:"createTime"},{label:"\u521B\u5EFA\u4EBA\u5458",value:"creatorName"},{label:"\u66F4\u65B0\u65F6\u95F4",value:"updateTime"}],options:[],openType:"",url:"https://fuss10.elemecdn.com/a/3f/3302e58f9a181d2509f3dc0fa68b0jpeg.jpeg"}),{title:x,visible:b,url:l,formData:A,jbInfoCal:B}=le(o);let N=async(s={})=>{!s.productId&&o.formData.productId&&(s=o.formData),await U.getDetail(s.productId).then(n=>{Object.assign(o.formData,fe(ie({},n.data),{wetherSale:n.data.wetherSale,productSpecification:findLabel(me,n.data.productSpecification)}))}),o.visible=!0},T=()=>{var n;let s=o.formData;(n=p==null?void 0:p.value)==null||n.init("edit",s)},J=()=>{let s=o.formData;Y.confirm("\u662F\u5426\u786E\u5B9A\u66F4\u6539\u72B6\u6001\u5417?","\u64CD\u4F5C\u786E\u8BA4").then(()=>{let n=null,r=[],i=s.productClassifyId;s&&(n=s.wetherSale===1?0:1,r=[s.productId]),U.allUpdateState({productIds:r,wetherSale:n,productClassifyIds:i}).then(w=>{k.success("\u64CD\u4F5C\u6210\u529F"),N(s)}).catch(()=>{})}).catch(()=>{k.info("\u5DF2\u53D6\u6D88")})},V=()=>{let s=o.formData;Y.confirm("\u662F\u5426\u786E\u5B9A\u5220\u9664?","\u64CD\u4F5C\u786E\u8BA4").then(()=>{let n=[];s&&(n=[s.productId]),U.del({productIds:n}).then(r=>{k.success("\u5220\u9664\u6210\u529F"),D()})}).catch(()=>{})};function D(){o.visible=!1,o.formData={},m("success")}return v({init:N}),(s,n)=>{const r=d("el-image"),i=d("el-button"),w=d("el-divider"),S=d("el-descriptions-item"),L=d("el-descriptions"),Q=d("el-dialog");return g(),W(de,null,[e(b)?(g(),I(Q,{key:0,title:"\u4EA7\u54C1\u8BE6\u60C5",modelValue:e(b),"onUpdate:modelValue":n[0]||(n[0]=q=>K(b)?b.value=q:null),width:"1200px",onClose:D,"close-on-click-modal":!1,"append-to-body":""},{default:u(()=>[c("div",ft,[c("div",_t,[c("div",null,[t(r,{style:{width:"100px",height:"100px"},src:e(l),"preview-src-list":[e(l)],"initial-index":4,fit:"cover"},null,8,["src","preview-src-list"])]),c("div",mt,[c("div",yt,[c("div",Ct,M(e(A).productName),1),c("div",null,[e(A).wetherSale===1?(g(),W("span",ht,Ft)):(g(),W("span",bt,xt))])]),c("div",St,[c("div",It,[kt,c("span",Bt,M(e(A).classifyName||"-"),1)]),c("div",null,[wt,c("span",At,M(e(A).productNumber||"-"),1)])])])]),c("div",null,[t(i,{onClick:e(T),type:"primary",icon:"Plus"},{default:u(()=>[Nt]),_:1},8,["onClick"]),t(i,{onClick:e(J),icon:"Edit"},{default:u(()=>[Vt]),_:1},8,["onClick"]),t(i,{onClick:e(V),type:"danger",icon:"Delete"},{default:u(()=>[$t]),_:1},8,["onClick"])])]),t(w),t(L,{class:"margin-top",title:"\u57FA\u672C\u4FE1\u606F",column:1,border:""},{default:u(()=>[(g(!0),W(de,null,Ce(e(B),(q,X)=>(g(),I(S,{"label-align":"right",align:"left",label:q.label,key:X,"label-class-name":"my-label","class-name":"my-content"},{label:u(()=>[c("div",Ut,M(q.label)+"\uFF1A",1)]),default:u(()=>[c("span",null,M(e(A)[q.value]||"-"),1)]),_:2},1032,["label"]))),128))]),_:1})]),_:1},8,["modelValue"])):G("",!0),t(Ee,{ref_key:"addRef",ref:p,onSuccess:e(N),treeData:E.treeData,pid:E.pid},null,8,["onSuccess","treeData","pid"])],64)}}});var Lt=Z(Tt,[["__scopeId","data-v-fcc81adc"]]);const zt=_=>(he("data-v-557bd8c3"),_=_(),ge(),_),Ot={class:"main"},jt={class:"content_box flexStart"},Pt={class:"left"},Jt={class:"marginB10 flexEnd"},qt={class:"right"},Rt={class:"flexBetween marginB20"},Mt=C("\u65B0\u589E\u4EA7\u54C1"),Wt=C("\u5BFC\u5165"),Gt=C("\u5BFC\u51FA"),Ht=C("\u4FEE\u6539\u4EA7\u54C1\u5206\u7C7B"),Kt=C("\u4FEE\u6539\u4EA7\u54C1\u72B6\u6001"),Qt=C("\u6279\u91CF\u5220\u9664"),Xt=C("\u7F16\u8F91"),Yt=C("\u5220\u9664"),Zt={class:"ces-pagination marginB20"},el=zt(()=>c("span",null,null,-1)),tl={class:"dialog-footer",style:{"text-align":"center"}},ll=C("\u63D0\u4EA4"),al=C("\u53D6\u6D88"),ul=ee({__name:"index",setup(_){ye();const v={value:"productClassifyId",label:"classifyName",children:"childProductClassifyList"},m=P(null),E=P(null),p=P(null),o=P(null),x=P(null);let b=a=>{var y;(y=x==null?void 0:x.value)==null||y.init()};const l=te({searchData:{keyWords:"",productClassifyId:""},dialogVisible2:!1,tableData:[],pagination:{pageSize:10,pageIndex:1,total:0},treeData:[],allList:[],selectList:[],formData2:{wetherSale:null},rules2:{wetherSale:[{required:!0,message:"\u8BF7\u9009\u62E9\u72B6\u6001",trigger:"blur"}]}});We(async()=>{re()});let A=()=>{let a=null;a=setInterval(()=>{let y=document.querySelector("#leftTree .el-tree-node .el-tree-node__content");y&&(y.click(),clearInterval(a))},100)};const{searchData:B,pagination:N,treeData:T,tableData:J,dialogVisible2:V,formData2:D,rules2:s}=le(l);let n=()=>{let a=JSON.parse(JSON.stringify(l.searchData));fileDown("product",a)},r=()=>{var a;(a=m==null?void 0:m.value)==null||a.init("add")},i=(a,y)=>{var f;(f=m==null?void 0:m.value)==null||f.init("edit",a)},w=(a,y)=>{var f;(f=o==null?void 0:o.value)==null||f.init(a)},S=a=>{l.selectList=a};function L(a,y,f){l.searchData.productClassifyId!=a.productClassifyId&&(l.searchData.productClassifyId=a.productClassifyId,l.searchData.classifyName=a.classifyName,z())}function Q(){var a;(a=E==null?void 0:E.value)==null||a.init("add",{pName:l.searchData.classifyName,pid:l.searchData.productClassifyId})}function q(){var a;(a=E==null?void 0:E.value)==null||a.init("edit",{classifyName:l.searchData.classifyName,productClassifyId:l.searchData.productClassifyId})}function X(){var a,y;if(!((a=l==null?void 0:l.selectList)!=null&&a.length)){k.error("\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u4EA7\u54C1\uFF01");return}(y=p==null?void 0:p.value)==null||y.init({classifyName:l.searchData.classifyName,productClassifyId:l.searchData.productClassifyId},l==null?void 0:l.selectList)}function ne(){Y.confirm("\u662F\u5426\u786E\u5B9A\u5220\u9664\u5206\u7C7B\u5417?","\u64CD\u4F5C\u786E\u8BA4").then(()=>{U.delType(l.searchData.productClassifyId).then(async a=>{k.success("\u5220\u9664\u6210\u529F"),re()})}).catch(()=>{})}let ae=()=>{var a;if(!((a=l==null?void 0:l.selectList)!=null&&a.length)){k.error("\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u4EA7\u54C1\uFF01");return}l.dialogVisible2=!0},ue=(a,y)=>{if(!a&&!l.selectList.length){k.error("\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u4EA7\u54C1\uFF01");return}Y.confirm("\u662F\u5426\u786E\u5B9A\u66F4\u6539\u72B6\u6001\u5417?","\u64CD\u4F5C\u786E\u8BA4").then(()=>{let f=null,$=[],pe=l.searchData.productClassifyId;a?(f=a.wetherSale?_e[1].value:_e[0].value,$=[a.productId]):(f=y,$=l.selectList.map(oe=>oe.productId)),U.allUpdateState({productIds:$,wetherSale:f,productClassifyIds:pe}).then(oe=>{k.success("\u64CD\u4F5C\u6210\u529F"),z(),ve()}).catch(()=>{a.wetherSale=!a.wetherSale})}).catch(()=>{k.info("\u5DF2\u53D6\u6D88"),a.wetherSale=!a.wetherSale})},F=(a,y)=>{if(!a&&!l.selectList.length){k.error("\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u4EA7\u54C1\uFF01");return}Y.confirm("\u662F\u5426\u786E\u5B9A\u5220\u9664?","\u64CD\u4F5C\u786E\u8BA4").then(()=>{let f=[];a?f=[a.productId]:f=l.selectList.map($=>$.productId),U.del({productIds:f}).then($=>{k.success("\u5220\u9664\u6210\u529F"),z()})}).catch(()=>{})},Se=async()=>{await De.getType().then(a=>{l.treeData=a.data})},re=async()=>{await Se(),A()},z=()=>{let a=JSON.parse(JSON.stringify(l.searchData));delete a.classifyName,l.tableData=[],U.getList(a).then(y=>{var f;l.tableData=((f=y.data.records)==null?void 0:f.map($=>fe(ie({},$),{id:$.productId,wetherSale:$.wetherSale==1,productSpecification:findLabel(me,$.productSpecification)})))||[],l.pagination.total=y.data.total||0})},Ie=a=>{l.pagination.pageIndex=a,z()},ke=a=>{l.pagination.pageSize=a,z()};const ce=P(null);function Be(){ce.value.validate(a=>{a&&ue(null,l.formData2.wetherSale)})}function we(){l.dialogVisible2=!1}function ve(){ce.value.resetFields(),l.dialogVisible2=!1,Object.assign(l.formData2,{wetherSale:""})}return(a,y)=>{const f=d("el-button"),$=d("el-tree"),pe=d("el-divider"),oe=d("el-input"),R=d("el-table-column"),Ae=d("el-link"),Ne=d("el-switch"),Ve=d("el-table"),$e=d("el-pagination"),Ue=d("el-card"),Te=d("el-option"),Le=d("el-select"),ze=d("el-form-item"),Oe=d("el-form"),je=d("el-dialog"),O=Ge("has-perm");return g(),W("div",Ot,[t(Ue,{id:"content_box",shadow:"never"},{default:u(()=>[c("div",jt,[c("div",Pt,[c("div",Jt,[j(t(f,{onClick:Q,type:"primary",size:"small",icon:"Plus"},null,512),[[O,"crm:product:add"]]),j(t(f,{onClick:q,icon:"Edit",size:"small"},null,512),[[O,"crm:product:update"]]),j(t(f,{onClick:ne,type:"danger",size:"small",icon:"Delete"},null,512),[[O,"crm:product:delete"]])]),t($,{id:"leftTree",data:e(T),"highlight-current":!0,"node-key":"id","default-expand-all":"",props:v,"expand-on-click-node":!1,onNodeClick:L},null,8,["data"])]),t(pe,{direction:"vertical",style:{height:"100%"}}),c("div",qt,[c("div",Rt,[c("div",null,[j((g(),I(f,{onClick:e(r),type:"primary",icon:"Plus"},{default:u(()=>[Mt]),_:1},8,["onClick"])),[[O,"crm:product:add"]]),j((g(),I(f,{type:"primary",icon:"Upload",onClick:e(b)},{default:u(()=>[Wt]),_:1},8,["onClick"])),[[O,"crm:product:import"]]),j((g(),I(f,{icon:"Download",onClick:e(n)},{default:u(()=>[Gt]),_:1},8,["onClick"])),[[O,"crm:product:export"]]),j((g(),I(f,{type:"primary",onClick:X},{default:u(()=>[Ht]),_:1})),[[O,"crm:product:update"]]),j((g(),I(f,{type:"primary",onClick:e(ae)},{default:u(()=>[Kt]),_:1},8,["onClick"])),[[O,"crm:product:update"]]),t(f,{type:"danger",onClick:y[0]||(y[0]=h=>e(F)()),icon:"Delete"},{default:u(()=>[Qt]),_:1})]),c("div",null,[t(oe,{style:{"margin-right":"10px",width:"200px"},modelValue:e(B).keyWords,"onUpdate:modelValue":y[1]||(y[1]=h=>e(B).keyWords=h),placeholder:"\u4EA7\u54C1\u540D\u79F0/\u7F16\u53F7",clearable:"",onBlur:e(z)},null,8,["modelValue","onBlur"])])]),t(Ve,{ref:"multipleTableRef",border:!0,data:e(J),height:"650px",onSelectionChange:e(S)},{default:u(()=>[t(R,{type:"selection",width:"55"}),t(R,{label:"\u4EA7\u54C1\u540D\u79F0",width:"200px"},{default:u(h=>[t(Ae,{type:"primary",onClick:se=>e(w)(h.row),underline:!1},{default:u(()=>[C(M(h.row.productName),1)]),_:2},1032,["onClick"])]),_:1}),t(R,{label:"\u4EA7\u54C1\u7F16\u53F7",property:"productNumber"}),t(R,{label:"\u6807\u51C6\u5355\u4EF7",property:"standardPrice"}),t(R,{label:"\u4EA7\u54C1\u89C4\u683C",property:"productSpecification"}),t(R,{label:"\u4E0A\u67B6\u72B6\u6001"},{default:u(h=>[t(Ne,{modelValue:h.row.wetherSale,"onUpdate:modelValue":se=>h.row.wetherSale=se,onChange:()=>e(ue)(h.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),t(R,{label:"\u66F4\u65B0\u65F6\u95F4",property:"updateTime"}),t(R,{label:"\u64CD\u4F5C",width:"200px"},{default:u(h=>[j((g(),I(f,{type:"primary",size:"small",plain:!0,icon:"Edit","crm:product:update":"",onClick:se=>e(i)(h.row,h.$index)},{default:u(()=>[Xt]),_:2},1032,["onClick"])),[[O,"crm:product:update"]]),j((g(),I(f,{type:"danger",size:"small",plain:!0,icon:"Delete",onClick:se=>e(F)(h.row,h.$index)},{default:u(()=>[Yt]),_:2},1032,["onClick"])),[[O,"crm:product:delete"]])]),_:1})]),_:1},8,["data","onSelectionChange"]),c("div",Zt,[el,t($e,{class:"el_pagination",onCurrentChange:e(Ie),onSizeChange:e(ke),background:"","page-sizes":[10,20,30,40,50,100],layout:"sizes ,prev, pager, next","page-size":e(N).pageSize,"current-page":e(N).pageIndex,total:e(N).total},null,8,["onCurrentChange","onSizeChange","page-size","current-page","total"])])])])]),_:1}),t(Ee,{ref_key:"addRef",ref:m,onSuccess:e(z),treeData:e(T),pid:e(B).productClassifyId},null,8,["onSuccess","treeData","pid"]),t(je,{modelValue:e(V),"onUpdate:modelValue":y[3]||(y[3]=h=>K(V)?V.value=h:null),"append-to-body":!0,"lock-scroll":!1,"close-on-click-modal":!1,onClose:y[4]||(y[4]=h=>we()),"destroy-on-close":"",title:"\u4FEE\u6539\u72B6\u6001",width:"30%"},{footer:u(()=>[c("div",tl,[t(f,{type:"primary",onClick:Be},{default:u(()=>[ll]),_:1}),t(f,{onClick:ve},{default:u(()=>[al]),_:1})])]),default:u(()=>[t(Oe,{ref_key:"dataFormRef2",ref:ce,model:e(D),rules:e(s),"label-width":"130px"},{default:u(()=>[t(ze,{label:"\u9009\u62E9\u72B6\u6001:",prop:"wetherSale"},{default:u(()=>[t(Le,{modelValue:e(D).wetherSale,"onUpdate:modelValue":y[2]||(y[2]=h=>e(D).wetherSale=h),style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9"},{default:u(()=>[(g(!0),W(de,null,Ce(e(_e),h=>(g(),I(Te,{key:h.value,label:h.label,value:h.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),t(it,{ref_key:"addTreeTypeRef",ref:E,onSuccess:e(re)},null,8,["onSuccess"]),t(pt,{ref_key:"updateTypeRef",ref:p,onSuccess:e(z),treeData:e(T)},null,8,["onSuccess","treeData"]),t(Lt,{ref_key:"detailRef",ref:o,onSuccess:e(z),treeData:e(T),pid:e(B).productClassifyId},null,8,["onSuccess","treeData","pid"]),t(He,{ref_key:"uploadFileRef",ref:x,typeName:"product",onSuccess:e(z)},null,8,["onSuccess"])])}}});var cl=Z(ul,[["__scopeId","data-v-557bd8c3"]]);export{cl as default};
