var R=Object.defineProperty,M=Object.defineProperties;var T=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var g=(n,t,s)=>t in n?R(n,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[t]=s,_=(n,t)=>{for(var s in t||(t={}))U.call(t,s)&&g(n,s,t[s]);if(b)for(var s of b(t))O.call(t,s)&&g(n,s,t[s]);return n},y=(n,t)=>M(n,T(t));import{d as V,s as j,u as q,q as G,L as J,r as H,M as W,A as $,an as E,E as K,a7 as Q,a0 as f,aA as X,aG as Y,a as C,b as Z,f as ee,m as h,x as d,e as B,h as u,G as D}from"./index.052afee0.js";import{A as te}from"./add.2ec2bbc4.js";const ae={class:"flexBetween",style:{"margin-bottom":"20px"}},le=h("div",null,"\u8054\u7CFB\u4EBA",-1),ne={class:"flexStart"},se=D("\u6DFB\u52A0"),oe=D("\u53D1\u9001\u77ED\u4FE1"),de=V({__name:"contacts",props:{row:{type:Object,default:{}}},emits:["success"],setup(n,{expose:t,emit:s}){const c=n,S=j();q(),G();const a=J({searchData:{},checked1:!1,tableCols:[{label:"\u8054\u7CFB\u4EBA\u59D3\u540D",prop:"contactName"},{label:"\u624B\u673A\u53F7\u7801",prop:"cluePhone"},{label:"\u89D2\u8272",prop:"clueRole"},{label:"\u90E8\u95E8\u804C\u52A1",prop:"departmentalPosition"},{label:"\u751F\u65E5",prop:"birthday"},{label:"\u64CD\u4F5C",type:"Button",width:"330px",btnList:[{label:"\u62E8\u6253",size:"small",icon:"Phone",plain:!0,type:"primary",handle:(e,l)=>k(e.cluePhone,e.contactUserId)},{label:"\u77ED\u4FE1",size:"small",icon:"Message",plain:!0,type:"primary",handle:(e,l)=>m(!0,[e])},{label:"\u8BE6\u60C5",size:"small",icon:"Edit",plain:!0,type:"primary",isShow:e=>c.row.clientId!=e.clientId,handle:(e,l)=>L(e)},{type:"danger",label:"\u5220\u9664",icon:"Delete",size:"small",plain:!0,handle:(e,l)=>z(e)}]}],tableData:[],clientId:"",pagination:{pageSize:10,pageIndex:1,total:0},selectList:[]}),r=H(null),{searchData:ue,tableData:F,tableCols:x,pagination:I}=W(a);let A=async(e={})=>{};$(()=>{a.clientId=c.row.clientId,p()});let w=(e,l)=>{a.selectList=e.selection},v=()=>{a.selectList.length||f.error("\u8BF7\u9009\u62E9\u8981\u53D1\u9001\u7684\u8054\u7CFB\u4EBA\uFF01"),m(!0,a.selectList)},P=()=>{var e;(e=r==null?void 0:r.value)==null||e.init("add2",{clientName:c.row.clientName,clientId:c.row.clientId})};const m=E("openSms"),k=E("oepnPhone");let z=(e,l)=>{K.confirm("\u8BE5\u6570\u636E\u5C06\u6C38\u4E45\u88AB\u5220\u9664\uFF0C\u5E76\u4E14\u65E0\u6CD5\u6062\u590D\u3002","\u786E\u5B9A\u5220\u9664\u8BE5\u6570\u636E\u5417\uFF1F").then(()=>{var o;(o=Q)==null||o.del(e.contactUserId).then(i=>{f.success("\u5220\u9664\u6210\u529F"),N()})}).catch(()=>{})},L=(e,l)=>{S.push({path:"/detailManage/contacts",query:{contactUserId:e.contactUserId}})};t({init:A});const N=()=>{p()},p=async()=>{var l;let e=null;try{let o=JSON.parse(JSON.stringify(a.searchData));o.current=a.pagination.pageIndex,o.size=a.pagination.pageSize,e=await X.clientContact(a.clientId,o),a.tableData=((l=e.data.records)==null?void 0:l.map(i=>y(_({},i),{clueRole:findLabel(Y,i.clueRole)})))||[],a.pagination.total=e.data.total||0}catch{a.tableData=[]}};return(e,l)=>{const o=C("el-button"),i=C("TableTemp");return Z(),ee("div",null,[h("div",ae,[le,h("div",ne,[d(o,{type:"primary",icon:"Plus",onClick:u(P)},{default:B(()=>[se]),_:1},8,["onClick"]),d(o,{type:"primary",onClick:l[0]||(l[0]=ie=>u(v)())},{default:B(()=>[oe]),_:1})])]),d(i,{comheight:360,isBorder:!0,isSelection:!0,isIndex:!1,isPagination:!0,isShowPageBtn:!1,loading:!1,isHandle:!0,tableData:u(F),tableCols:u(x),onSelectChage:u(w),pagination:u(I),onRefresh:p,headerStyle:{background:"rgb(245 245 245)",color:"#666666",fontSize:"14px",fontWeight:700,height:"49px"}},null,8,["tableData","tableCols","onSelectChage","pagination","headerStyle"]),d(te,{ref_key:"LXRAddRef",ref:r,onSuccess:p},null,512)])}}});export{de as _};
