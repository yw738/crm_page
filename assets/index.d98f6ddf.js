var ie=Object.defineProperty,re=Object.defineProperties;var de=Object.getOwnPropertyDescriptors;var X=Object.getOwnPropertySymbols;var ce=Object.prototype.hasOwnProperty,_e=Object.prototype.propertyIsEnumerable;var Y=(l,r,s)=>r in l?ie(l,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[r]=s,j=(l,r)=>{for(var s in r||(r={}))ce.call(r,s)&&Y(l,s,r[s]);if(X)for(var s of X(r))_e.call(r,s)&&Y(l,s,r[s]);return l},H=(l,r)=>re(l,de(r));import{_ as ee,a as c,b as u,c as E,e as o,f as i,g as U,ag as pe,F as z,m as e,t as w,C as fe,ah as he,Y as be,X as me,d as Fe,s as ve,u as ge,q as ye,r as xe,V as Ce,L as Be,M as Ee,h as t,y as F,x as n,n as K,U as we,p as Ae,l as ke,G as x,a0 as q,ai as Q}from"./index.6f18bade.js";import{i as Z}from"./index.a2421c88.js";const De={props:{tableData:{type:Array,default:()=>[]},tableArray:{type:Array,default:()=>[]},isShowSummary:{type:Boolean,default:!1},widthIsAuto:{type:Boolean,default:!0},height:{type:Number}},methods:{arraySpanMethod({row:l,column:r,rowIndex:s,columnIndex:v}){if(s%2==0){if(v<6)return{rowspan:l.rowspan,colspan:1}}else if(v<6)return{rowspan:l.rowspan,colspan:1}}}};function Se(l,r,s,v,J,_){const A=c("el-table-column"),L=c("el-table");return u(),E(L,{data:s.tableData,id:"editAbletrendsTable",class:"mergetable",border:"",ref:"multipleTable",size:"mini","span-method":_.arraySpanMethod,height:s.height?s.height:null},{default:o(()=>[(u(!0),i(z,null,U(s.tableArray,(h,p)=>(u(),E(A,{key:p,label:h.label,width:h.width?h.width:"auto","min-width":"100"},pe({default:o(B=>[e("div",null,w(B.row[h.value]),1)]),_:2},[h.children&&h.children.length?{name:"default",fn:o(B=>[(u(!0),i(z,null,U(h.children,(V,M)=>(u(),E(A,{key:M,prop:V.value,label:V.label,width:h.width?h.width:"auto","min-width":"100"},null,8,["prop","label","width"]))),128))])}:void 0]),1032,["label","width"]))),128)),fe(l.$slots,"default")]),_:3},8,["data","span-method","height"])}var Ne=ee(De,[["render",Se]]);const N=[{label:"\u5BA2\u6237\u540D\u79F0",value:"clientName"},{label:"\u5BA2\u6237\u72B6\u6001",value:"clientState",formatter:l=>findLabel(he,l.clientState)},{label:"\u6240\u5C5E\u884C\u4E1A",value:"clientIndustry",formatter:l=>findLabel(be,l.clientIndustry)},{label:"\u5BA2\u6237\u6765\u6E90",value:"clientSource",formatter:l=>findLabel(me,l.clientSource)}],Ie=N,Te=N,Ue=N,ze=N,Le=N,Ve=[{label:"\u4EA7\u54C1\u540D\u79F0",value:"productName"},{label:"\u6240\u5C5E\u5206\u7C7B",value:"productClassifyName"},{label:"\u4EA7\u54C1\u7F16\u53F7",value:"productNumber"},{label:"\u6807\u51C6\u5355\u4EF7",value:"standardPrice"},{label:"\u4EA7\u54C1\u89C4\u683C",value:"productSpecification"}],Me=[{label:"\u5546\u673A\u6807\u9898",value:"businessTitle"},{label:"\u5173\u8054\u5BA2\u6237\u7F16\u53F7",value:"clientName"},{label:"\u9884\u8BA1\u9500\u552E\u91D1\u989D",value:"salesAmount"},{label:"\u9500\u552E\u9636\u6BB5",value:"salesStage"},{label:"\u6210\u4EA4\u51E0\u7387",value:"clinchRate"},{label:"\u9884\u8BA1\u7B7E\u5355\u65E5\u671F",value:"dateSign"}],Re=[{label:"\u8BA2\u5355\u6807\u9898",value:"orderTitile"},{label:"\u5173\u8054\u5BA2\u6237\u7CFB\u7EDF\u7F16\u53F7",value:"clientName"},{label:"\u5173\u8054\u5546\u673A",value:"businessName"},{label:"\u7B7E\u5355\u65E5\u671F",value:"signTime"},{label:"\u8BA2\u5355\u603B\u91D1\u989D",value:"orderTotalMoney"},{label:"\u4EA7\u54C1\u4FE1\u606F",value:"dateSign",children:[{label:"\u4EA7\u54C1\u540D\u79F0",value:"productName"},{label:"\u4EA7\u54C1\u7F16\u53F7",value:"productNumber"},{label:"\u4EA7\u54C1\u89C4\u683C",value:"productSpecification"},{label:"\u6298\u6263\u7387",value:"discount"},{label:"\u9500\u552E\u5355\u4EF7",value:"salePrice"},{label:"\u603B\u4EF7",value:"totalPrice"},{label:"\u6570\u91CF",value:"saleNumber"}]}];var Pe={client:N,highSeas:Te,garbage:Ue,clue:Ie,cluePublic:ze,contact:Le,product:Ve,business:Me,order:Re};const C=l=>(Ae("data-v-8b342900"),l=l(),ke(),l),$e={key:0,class:"flexBetween marginB20"},je=C(()=>e("div",null,"1",-1)),qe=C(()=>e("div",null,"\u4E0A\u4F20\u6587\u4EF6",-1)),Oe=[je,qe],Je=C(()=>e("div",null,"2",-1)),We=C(()=>e("div",null,"\u6570\u636E\u9884\u89C8",-1)),Ge=[Je,We],Xe=C(()=>e("div",{class:"top flexStart"},[e("div",null,"3"),e("div",null,"\u5BFC\u5165\u6570\u636E")],-1)),Ye={key:0,class:"marginB20"},He={class:"flexStart card_box"},Ke={class:"left_img flexCenter"},Qe={class:"right flexBetween"},Ze=C(()=>e("div",{class:"tit"},"\u586B\u5199\u5BFC\u5165\u6570\u636E\u4FE1\u606F",-1)),et=C(()=>e("div",{class:"txt"}," \u8BF7\u6309\u7167\u6570\u636E\u6A21\u677F\u7684\u683C\u5F0F\u51C6\u5907\u5BFC\u5165\u6570\u636E\uFF0C\u6A21\u677F\u4E2D\u7684\u8868\u5934\u540D\u79F0\u4E0D\u53EF\u66F4\u6539\uFF0C\u8868\u5934\u884C\u4E0D\u80FD\u5220\u9664 ",-1)),tt=x("\u4E0B\u8F7D\u6A21\u677F"),ut={class:"flexStart card_box"},lt={class:"left_img flexCenter"},at={class:"right flexBetween"},ot=C(()=>e("div",{class:"tit"},"\u4E0A\u4F20\u586B\u597D\u7684\u4FE1\u606F\u8868",-1)),st=C(()=>e("div",{class:"txt"}," \u6587\u4EF6\u540E\u7F00\u540D\u5FC5\u987B\u4E3Axls \u6216xlsx \uFF08\u5373Excel\u683C\u5F0F\uFF09\uFF0C\u6587\u4EF6\u5927\u5C0F\u4E0D\u5F97\u5927\u4E8E10M\uFF0C\u6700\u591A\u652F\u6301\u5BFC\u51653000\u6761\u6570\u636E ",-1)),nt={class:"flexStart"},it={key:0,class:"fileClass"},rt={key:1,class:"marginB20"},dt={class:"flexStart card_box"},ct={class:"left_img flexCenter"},_t={class:"right flexBetween"},pt={class:"tit"},ft=x(" \u6B63\u5E38\u6570\u91CF\u6761\u6570: "),ht={class:"ok"},bt={class:"tit"},mt=x(" \u5F02\u5E38\u6570\u91CF\u6761\u6570: "),Ft={class:"err"},vt=C(()=>e("div",null,"\u5F02\u5E38\u63D0\u793A\uFF1A",-1)),gt={class:"errInfo"},yt={key:2,class:"marginB20"},xt={key:1},Ct={key:3,class:"marginB20"},Bt={key:0,class:"flexBetween"},Et=x("\u5BFC\u5165\u8BB0\u5F55"),wt={class:"dialog-footer"},At={key:0},kt=x("\u53D6\u6D88"),Dt=x("\u4E0B\u4E00\u6B65"),St={key:1},Nt=x("\u91CD\u65B0\u4E0A\u4F20"),It=x("\u4E0B\u4E00\u6B65"),Tt={key:2},Ut=x("\u4E0A\u4E00\u6B65"),zt=x("\u4E0B\u4E00\u6B65"),Lt=Fe({__name:"index",props:{typeName:{type:String,default:"client"}},emits:["success"],setup(l,{expose:r,emit:s}){const v=l,J=ve();ge(),ye(),xe(Ce);const _=Be({title:"",visible:!1,formData:{clientFollowId:"",clientId:"",clientState:"",contactUserId:"",followType:0,followTime:"",followContent:"",remindPeople:[],nextFollowTime:"",nextFollowContent:"",nextFollowUserId:"",followUpReminder:"",followUpTypes:[]},checked1:!1,rules:{nextFollowTime:[{required:!0,message:"\u8BF7\u9009\u62E9\u8DDF\u8FDB\u65F6\u95F4",trigger:"blur"}],nextFollowUserId:[{required:!0,message:"\u8BF7\u9009\u62E9\u8DDF\u8FDB\u4EBA\u5458",trigger:"blur"}]},options:[],clientNameList:[],contactUserList:[],remindPeople:[],props1:{checkStrictly:!0,value:"id",label:"name"},allList:[],tableCal:Pe[v.typeName],fileName:"",uploadData:{result:[],normalSize:0,errorInfos:[]},step:1}),{visible:A,tableCal:L,fileName:h,step:p,uploadData:B}=Ee(_);let V=async(f="customer",a={})=>{_.visible=!0,_.step=1},M=async f=>{if(f==2&&!_.fileName){q.warning("\u8BF7\u4E0A\u4F20\u586B\u597D\u7684\u4FE1\u606F\u8868\uFF01");return}_.step=f},W=f=>{let{step:a}=_;if(f==1){if(a==1||a==2||a==3)return"active"}else if(f==2&&a==3)return"active"},te=()=>{let{typeName:f}=v,a=Z.filter(m=>m.id==f)[0]||{},g=a.value,b=a.label;!g&&!b||window.fileDown("fileTemplate",{type:g},b)},ue=f=>{const a=new FormData;a.append("file",f);let{typeName:g}=v;Q[g](a).then(b=>{if(b.data.type=="application/json"){const m=new FileReader;m.readAsText(b.data,"utf-8"),m.onload=function(){const{data:y}=JSON.parse(m.result);if(y){if(_.fileName=f.name,g=="order"&&y.result.length){let I=[];y.result.forEach(k=>{var R;if((R=k.productInfos)!=null&&R.length){let P=k.productInfos.length;for(let D=0;D<P;D++){let T=j(j({},k),k.productInfos[D]);D===0?Object.assign(T,{rowspan:P}):Object.assign(T,{rowspan:0}),I.push(T)}}else I.push(H(j({},k),{rowspan:1}))}),y.result=I}_.uploadData=y,q.success("\u4E0A\u4F20\u6210\u529F")}else q.error("\u4E0A\u4F20\u5931\u8D25")}}})};async function le(){var g,b;let{typeName:f}=v,a=(b=(g=Z)==null?void 0:g.filter(m=>m.id==f)[0])==null?void 0:b.value;try{let m=await Q.warehousing({importDataType:a});q.success("\u5BFC\u5165\u6210\u529F\uFF01"),_.step=4,s("success")}catch{}}let ae=()=>{J.push({path:"/officeManage/importLog"})};function G(){_.visible=!1,_.uploadData={},_.fileName=""}return r({init:V}),(f,a)=>{const g=c("Download"),b=c("el-icon"),m=c("el-link"),y=c("el-card"),I=c("UploadFilled"),k=c("UploadBotton"),R=c("WarningFilled"),P=c("el-rate"),D=c("el-table-column"),T=c("el-table"),oe=c("el-result"),S=c("el-button"),se=c("el-dialog");return t(A)?(u(),E(se,{key:0,title:"\u6279\u91CF\u5BFC\u5165",modelValue:t(A),"onUpdate:modelValue":a[4]||(a[4]=d=>we(A)?A.value=d:null),width:"800px",onClose:G,"close-on-click-modal":!1,"append-to-body":""},{footer:o(()=>[t(p)!=4?(u(),i("div",Bt,[e("div",null,[t(p)==1?(u(),E(m,{key:0,type:"primary",onClick:t(ae),underline:!1},{default:o(()=>[Et]),_:1},8,["onClick"])):F("",!0)]),e("div",wt,[t(p)==1?(u(),i("div",At,[n(S,{onClick:G},{default:o(()=>[kt]),_:1}),n(S,{type:"primary",onClick:a[0]||(a[0]=d=>t(M)(2))},{default:o(()=>[Dt]),_:1})])):F("",!0),t(p)==2?(u(),i("div",St,[n(S,{onClick:a[1]||(a[1]=d=>p.value=1)},{default:o(()=>[Nt]),_:1}),n(S,{type:"primary",onClick:a[2]||(a[2]=d=>t(M)(3))},{default:o(()=>[It]),_:1})])):F("",!0),t(p)==3?(u(),i("div",Tt,[n(S,{onClick:a[3]||(a[3]=d=>p.value=2)},{default:o(()=>[Ut]),_:1}),n(S,{type:"primary",onClick:le},{default:o(()=>[zt]),_:1})])):F("",!0)])])):F("",!0)]),default:o(()=>[t(p)!=4?(u(),i("div",$e,[e("div",{class:K(["top flexStart",t(W)(1)])},Oe,2),e("div",{class:K(["top flexStart",t(W)(2)])},Ge,2),Xe])):F("",!0),e("div",null,[t(p)==1?(u(),i("div",Ye,[n(y,{class:"marginB20",shadow:"never","body-style":{padding:"0 "}},{default:o(()=>[e("div",He,[e("div",Ke,[n(b,{color:"#ccc",size:"40px"},{default:o(()=>[n(g)]),_:1})]),e("div",Qe,[Ze,et,n(m,{type:"primary",onClick:t(te),underline:!1},{default:o(()=>[tt]),_:1},8,["onClick"])])])]),_:1}),n(y,{class:"marginB20",shadow:"never","body-style":{padding:"0 "}},{default:o(()=>[e("div",ut,[e("div",lt,[n(b,{color:"#ccc",size:"40px"},{default:o(()=>[n(I)]),_:1})]),e("div",at,[ot,st,e("p",nt,[n(k,{isCustomUpload:!0,isShowTxtLink:!0,title:"\u4E0A\u4F20\u6587\u4EF6",onSuccess:t(ue),style:{width:"100%"}},null,8,["onSuccess"]),t(h)?(u(),i("span",it,w(t(h)),1)):F("",!0)])])])]),_:1})])):F("",!0),t(p)==2?(u(),i("div",rt,[n(y,{class:"marginB20",shadow:"never","body-style":{padding:"0 "}},{default:o(()=>[e("div",dt,[e("div",ct,[n(b,{color:"#ccc",size:"40px"},{default:o(()=>[n(R)]),_:1})]),e("div",_t,[e("div",pt,[ft,e("span",ht,w(t(B).normalSize)+"\u6761",1)]),e("div",bt,[mt,e("span",Ft,w(t(B).errorInfos.length)+"\u6761",1)])])])]),_:1}),n(y,{class:"marginB20",shadow:"never"},{default:o(()=>[vt,e("div",gt,[v.typeName=="order"?(u(!0),i(z,{key:0},U(t(B).errorInfos,(d,O)=>(u(),i("div",null,w(d.tipsInfo),1))),256)):(u(!0),i(z,{key:1},U(t(B).errorInfos,(d,O)=>(u(),i("div",null," \u7B2C"+w(d.rowNumber)+"\u884C\uFF1A "+w(d.errorDetails),1))),256))])]),_:1})])):F("",!0),t(p)==3?(u(),i("div",yt,[v.typeName=="order"?(u(),E(Ne,{key:0,tableArray:t(L),tableData:t(B).result},null,8,["tableArray","tableData"])):(u(),E(T,{key:1,ref:"multipleTableRef",border:!0,data:t(B).result,height:"300px"},{default:o(()=>[(u(!0),i(z,null,U(t(L),(d,O)=>(u(),E(D,{key:O,label:d.label},{default:o($=>[d.type==1?(u(),E(P,{key:0,modelValue:$.row.clientStar,"onUpdate:modelValue":ne=>$.row.clientStar=ne},null,8,["modelValue","onUpdate:modelValue"])):(u(),i("span",xt,w(d.formatter&&d.formatter($.row)||$.row[d.value]||"-"),1))]),_:2},1032,["label"]))),128))]),_:1},8,["data"]))])):F("",!0),t(p)==4?(u(),i("div",Ct,[n(oe,{icon:"success",title:"\u6279\u91CF\u5BFC\u5165\u5B8C\u6210","sub-title":"\u60A8\u5DF2\u6210\u529F\u5BFC\u5165\u6570\u636E"})])):F("",!0)])]),_:1},8,["modelValue"])):F("",!0)}}});var Pt=ee(Lt,[["__scopeId","data-v-8b342900"]]);export{Pt as U};
