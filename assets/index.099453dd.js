var W=Object.defineProperty,N=Object.defineProperties;var O=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var y=(o,u,a)=>u in o?W(o,u,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[u]=a,D=(o,u)=>{for(var a in u||(u={}))V.call(u,a)&&y(o,a,u[a]);if(f)for(var a of f(u))X.call(u,a)&&y(o,a,u[a]);return o},C=(o,u)=>N(o,O(u));import{_ as $,d as G,ad as J,q as K,r as c,L as Q,X as Y,ae as Z,$ as p,M as ee,E,a0 as g,o as te,af as ae,a as le,b as ue,f as oe,x as d,h as r}from"./index.6f18bade.js";import{T as ne}from"./TransferUser.fdd6e020.js";import{F as se}from"./FollowTask.e925c40f.js";import{A as ie}from"./add.244b01c1.js";import{U as re}from"./index.d98f6ddf.js";import"./index.a2421c88.js";const ce={class:"content_box"},pe=G({__name:"index",emits:["openApp"],setup(o,{emit:u}){J("calsType","crm:client:query:highSeas");const{user:a}=K(),h=c(null);let S=e=>{var t;(t=h==null?void 0:h.value)==null||t.init()};const n=Q({searchData:{keyWords:null,clientSource:null,clientHighType:null,oldBelongUserId:null,intoThePoolStartDate:null,intoThePoolEndDate:null,isTopSort:!0},selectList:[],requestData:{companyId:a.userInfo.companyId},searchForm:[{type:"input",prop:"keyWords",width:"180px",placeholder:"\u641C\u7D22\u5173\u952E\u5B57",change:()=>{}},{type:"select",prop:"clientSource",placeholder:"\u5BA2\u6237\u6765\u6E90",width:"180px",options:Y,change:()=>{}},{type:"select",prop:"clientHighType",placeholder:"\u5BA2\u6237\u7C7B\u578B",width:"180px",options:Z,change:()=>{}},{type:"select",prop:"oldBelongUserId",placeholder:"\u524D\u5F52\u5C5E\u4EBA",width:"180px",options:[],change:()=>{}},{type:"daterange",prop:"intoThePoolStartDate",prop2:"intoThePoolEndDate",placeholder:"\u5165\u5E93\u65F6\u95F4",change:()=>{}}],searchHandle:[{label:"\u67E5\u8BE2",type:"primary",icon:"Search",handle:()=>U()},{label:"\u91CD\u7F6E",handle:()=>q()}],tableHandles:[{label:"\u6DFB\u52A0",type:"primary",icon:"Plus",isShow:()=>a.userLevel==2,handle:()=>x()},{label:"\u5BFC\u5165",icon:"Upload",isShow:()=>a.userLevel==2,handle:e=>S()},{label:"\u5BFC\u51FA",icon:"Download",isShow:()=>a.userLevel==2,handle:()=>P()},{label:"\u9886\u53D6\u5BA2\u6237",handle:()=>z()},{label:"\u5206\u914D\u5BA2\u6237",isShow:()=>a.userLevel==2,handle:()=>H()}],tableCols:[{label:"\u64CD\u4F5C",type:"Button",width:"340px",btnList:[{type:"primary",label:"\u7F16\u8F91",icon:"Edit",size:"small",isShow:()=>a.userLevel==2,handle:(e,t)=>j(e)},{type:"primary",label:"\u7F6E\u9876",size:"small",icon:"SortUp",handle:(e,t)=>L(e)},{type:"danger",label:"\u5220\u9664",icon:"Delete",size:"small",isShow:()=>a.userLevel==2,handle:(e,t)=>M(e)}]}],tableData:[],appTableData:[],pagination:{pageSize:10,pageIndex:1,total:0},treeData:[],allList:[],getApi:p.getList2}),{searchData:B,searchForm:_,searchHandle:de,tableHandles:b,tableCols:A,pagination:T,getApi:v}=ee(n),m=c(),i=c(null);c(null);const F=c(null),w=c(null);let x=()=>{var e;(e=i==null?void 0:i.value)==null||e.init("add",{dialogType:"1"})},L=(e,t)=>{E.confirm("\u8BE5\u64CD\u4F5C\u5C06\u7F6E\u9876\u3002","\u786E\u5B9A\u7F6E\u9876\u5417\uFF1F").then(()=>{var l;(l=p)==null||l.top(e.clientId).then(R=>{g.success("\u7F6E\u9876\u6210\u529F"),s()})}).catch(()=>{})};te(()=>{p.queryEmployee().then(e=>{var t;n.searchForm[3].options=(t=e.data)==null?void 0:t.map(l=>({label:l.name,value:l.id,departmentId:l.departmentId}))}),ae("crm:client:query:highSeas").then(e=>{n.tableCols=[...e,...n.tableCols]})});const I=e=>C(D({},e),{intoThePoolStartDate:e.intoThePoolStartDate.split(" ")[0],intoThePoolEndDate:e.intoThePoolEndDate.split(" ")[0]});let k=e=>{n.selectList=e.selection},P=()=>{window.fileDown("highSeas",D({},n.searchData))},H=()=>{var t;let e=n.selectList.map(l=>l.clientId).join(",");(t=F==null?void 0:F.value)==null||t.init(e)};const U=()=>{n.pagination.pageIndex=1,s()},q=()=>{Object.assign(n.searchData,{keyWords:null,clientSource:null,clientHighType:null,oldBelongUserId:null,intoThePoolStartDate:null,intoThePoolEndDate:null,isTopSort:!0})};let z=()=>{let e=n.selectList.map(t=>t.clientId).join(",");if(!e){g.error("\u9886\u53D6\u5BA2\u6237\u81F3\u5C11\u9700\u9009\u62E91\u6761\u6570\u636E\uFF1B");return}E.confirm("\u662F\u5426\u786E\u8BA4\u9886\u53D6\u6240\u9009\u62E9\u7684\u5BA2\u6237\uFF1F\u9886\u53D6\u540E*\u5929\u540E\u672A\u8DDF\u8FDB/\u6210\u4EA4\uFF0C\u5BA2\u6237\u5C06\u81EA\u52A8\u653E\u56DE\u516C\u6D77","\u786E\u8BA4\u63D0\u793A").then(()=>{var t;(t=p)==null||t.receiveClient(e).then(l=>{g.success("\u64CD\u4F5C\u6210\u529F"),s()})}).catch(()=>{})},M=(e,t)=>{E.confirm("\u8BE5\u6570\u636E\u5C06\u6C38\u4E45\u88AB\u5220\u9664\uFF0C\u5E76\u4E14\u65E0\u6CD5\u6062\u590D\u3002\u786E\u5B9A\u5220\u9664\u5417\uFF1F","\u63D0\u793A").then(()=>{var l;(l=p)==null||l.del(e.clientId).then(R=>{g.success("\u5220\u9664\u6210\u529F"),s()})}).catch(()=>{})},j=(e,t)=>{var l;(l=i==null?void 0:i.value)==null||l.init("edit",e)};const s=()=>{var e;(e=m==null?void 0:m.value)==null||e.getList()};return(e,t)=>{const l=le("PageLayout");return ue(),oe("div",ce,[d(l,{ref_key:"pageLayout",ref:m,isSelection:!0,isIndex:!1,isShowPageBtn:!1,tableBtnIsTopRight:!1,searchForm:r(_),searchData:r(B),tableHandles:r(b),tableCols:r(A),pagination:r(T),api:r(v),requestFormmter:I,onSelectChage:r(k)},null,8,["searchForm","searchData","tableHandles","tableCols","pagination","api","onSelectChage"]),d(ne,{ref_key:"transferUserRef",ref:F,onSuccess:s},null,512),d(se,{ref_key:"followTaskRef",ref:w,onSuccess:s},null,512),d(ie,{ref_key:"addRef",ref:i,onSuccess:s},null,512),d(re,{ref_key:"uploadFileRef",ref:h,typeName:"highSeas",onSuccess:s},null,512)])}}});var ye=$(pe,[["__scopeId","data-v-7a498c5e"]]);export{ye as default};
