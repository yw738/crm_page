var z=Object.defineProperty,A=Object.defineProperties;var I=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var y=(u,a,l)=>a in u?z(u,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):u[a]=l,F=(u,a)=>{for(var l in a||(a={}))N.call(a,l)&&y(u,l,a[l]);if(_)for(var l of _(a))V.call(a,l)&&y(u,l,a[l]);return u},E=(u,a)=>A(u,I(a));import{U as L}from"./uploadFile.9e8069ca.js";import{d as q,s as v,u as M,q as R,L as U,r as G,M as H,ay as i,E as O,a0 as P,A as W,a as C,b as j,f as J,m as f,x as m,e as K,h as p,G as Q}from"./index.052afee0.js";const X={class:"flexBetween",style:{"margin-bottom":"20px"}},Y=f("div",null,"\u76F8\u5173\u9644\u4EF6",-1),Z={class:"flexStart"},$=Q("\u6DFB\u52A0"),ue=q({__name:"index",props:{fileType:{type:String,default:"order"}},emits:["success"],setup(u,{emit:a}){const l=u;v();const c=M();R();const r=U({checked1:!1,tableCols:[{label:"\u9644\u4EF6\u540D\u79F0",prop:"fileName"},{label:"\u9644\u4EF6\u683C\u5F0F",prop:"fileType"},{label:"\u6587\u4EF6\u5927\u5C0F",prop:"fileSize"},{label:"\u4E0A\u4F20\u65F6\u95F4",prop:"uploadTime"},{label:"\u4E0A\u4F20\u4EBA\u5458",prop:"creatorName"},{label:"\u5907\u6CE8",prop:"remarks"},{label:"\u64CD\u4F5C",type:"Button",width:"330px",btnList:[{label:"\u9884\u89C8",size:"small",icon:"Edit",plain:!0,type:"primary",handle:(e,t)=>T(e)},{label:"\u4E0B\u8F7D",size:"small",icon:"Edit",plain:!0,type:"primary",handle:(e,t)=>D(e)},{type:"danger",label:"\u5220\u9664",icon:"Delete",size:"small",plain:!0,handle:(e,t)=>w(e)}]}],tableData:[],pagination:{pageSize:10,pageIndex:1,total:0}}),n=G(null),{checked1:ee,tableData:g,tableCols:x}=H(r);let S=(e,t)=>{},D=e=>{i.download(e.fileVerify,e.fileName).then(t=>{let s=t.data;window.open(s)})},B=()=>{var t;let e=c.query.orderId;(t=n==null?void 0:n.value)==null||t.init({orderId:e})},w=e=>{O.confirm("\u8BE5\u6570\u636E\u5C06\u6C38\u4E45\u88AB\u5220\u9664\uFF0C\u5E76\u4E14\u65E0\u6CD5\u6062\u590D\u3002","\u786E\u5B9A\u5220\u9664\u8BE5\u6570\u636E\u5417\uFF1F").then(()=>{var t;(t=i)==null||t.orderDel(e.taskFileId).then(s=>{P.success("\u5220\u9664\u6210\u529F"),k()})}).catch(()=>{})},T=e=>{i.preview(e.fileVerify).then(t=>{let s=t.data;window.open(s)})};W(()=>{d()});const k=()=>{d()},d=async()=>{var t;let e=null;try{if(l.fileType=="order"){let s=c.query.orderId;e=await i.orderFileList(s,{size:999,current:1}),r.tableData=((t=e.data.records)==null?void 0:t.map(o=>{var h,b;return E(F({},o),{fileType:(b=(h=o==null?void 0:o.fileName)==null?void 0:h.split("."))==null?void 0:b.reverse()[0],fileSize:change_size(o.fileSize),uploadTime:o.uploadTime?dateFormat(o.uploadTime,!0,!1):""})}))||[]}else return}catch{r.tableData=[]}};return(e,t)=>{const s=C("el-button"),o=C("TableTemp");return j(),J("div",null,[f("div",X,[Y,f("div",Z,[m(s,{type:"primary",onClick:p(B)},{default:K(()=>[$]),_:1},8,["onClick"])])]),m(o,{comheight:360,isBorder:!0,isSelection:!0,isIndex:!1,isPagination:!1,loading:!1,isHandle:!0,tableData:p(g),tableCols:p(x),onSelectChage:p(S),onRefresh:d,headerStyle:{background:"rgb(245 245 245)",color:"#666666",fontSize:"14px",fontWeight:700,height:"49px"}},null,8,["tableData","tableCols","onSelectChage","headerStyle"]),m(L,{ref_key:"uploadFileRef",ref:n,onSuccess:d},null,512)])}}});export{ue as _};
