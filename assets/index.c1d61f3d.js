var me=Object.defineProperty,fe=Object.defineProperties;var be=Object.getOwnPropertyDescriptors;var ee=Object.getOwnPropertySymbols;var ye=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable;var te=(c,_,v)=>_ in c?me(c,_,{enumerable:!0,configurable:!0,writable:!0,value:v}):c[_]=v,N=(c,_)=>{for(var v in _||(_={}))ye.call(_,v)&&te(c,v,_[v]);if(ee)for(var v of ee(_))ve.call(_,v)&&te(c,v,_[v]);return c},P=(c,_)=>fe(c,be(_));import{d as V,s as H,u as G,q as U,L as M,M as J,w as De,A as j,av as ge,au as Y,a as A,b as p,f as h,x as a,e as b,F as K,g as Q,c as I,G as k,t as x,h as e,m as d,aH as ae,aI as Fe,aL as he,_ as le,aA as oe,p as ne,l as ue,r as $,o as xe,y as O,U as Be,K as we,E as ke,a6 as Ae,a0 as Ce}from"./index.6f18bade.js";import{f as se,F as Ee}from"./FollowTask.e925c40f.js";import{A as Se}from"./add.85cd694e.js";import{A as Te}from"./add.4d672949.js";import{C as $e}from"./Convert2Customer.be7a69bd.js";import{A as Ie}from"./add.3a7c70fe.js";import{g as Ne,A as Re}from"./AddTask.f5502617.js";import{A as Le}from"./AddTask2.d19b3af9.js";import{A as Pe}from"./AddCooperation.9a64fde0.js";import{O as Oe}from"./add.cb8cec8f.js";import{F as Z}from"./index.5a1c8eed.js";import{_ as ze}from"./index.5f93f5a1.js";import{_ as Ve}from"./index.3d810bbf.js";import"./product.3072bf93.js";import"./dict.c33b8edc.js";import"./index.0bd58103.js";import"./uploadFile.7fb63e06.js";const Ue=[{label:"\u8BA2\u5355\u6807\u9898",value:"orderTitile"},{label:"\u5173\u8054\u5BA2\u6237",value:"clientName",type:1},{label:"\u5173\u8054\u5546\u673A",value:"businessTitle",type:4},{label:"\u4EA7\u54C1\u8BB0\u5F55",value:"orderProductsLength",type:5},{label:"\u8BA2\u5355\u603B\u91D1\u989D",value:"orderTotalMoney"},{label:"\u7B7E\u5355\u65E5\u671F",value:"signTime"},{label:"\u5F00\u59CB\u65E5\u671F",value:"startTime"},{label:"\u5230\u671F\u65E5\u671F",value:"endTime"},{label:"\u5907\u6CE8\u4FE1\u606F",value:"remarks"}],Me=[{label:"\u56DE\u6B3E\u622A\u6B62\u65E5\u671F",value:"refundDate"},{label:"\u5DF2\u56DE\u6B3E\u91D1\u989D",value:"amountPaidBack"},{label:"\u672A\u56DE\u6B3E\u91D1\u989D",value:"outstandingAmount"},{label:"\u5DF2\u5F00\u7968\u91D1\u989D",value:"invoicedAmount"},{label:"\u672A\u5F00\u7968\u91D1\u989D",value:"a"},{label:"\u56DE\u6B3E\u72B6\u6001",value:"overdueStatus"},{label:"\u5DF2\u903E\u671F\u5929\u6570",value:"daysOverdue"}],Je=[{label:"\u7CFB\u7EDF\u7F16\u53F7",value:"orderId"},{label:"\u534F\u4F5C\u4EBA\u5458",value:"cooperationUserName"},{label:"\u5F52\u5C5E\u4EBA\u5458",value:"departmentName"},{label:"\u524D\u5F52\u5C5E\u4EBA",value:"oldUserName"},{label:"\u521B\u5EFA\u4EBA\u5458",value:"creatorName"},{label:"\u521B\u5EFA\u65F6\u95F4",value:"createTime"},{label:"\u66F4\u65B0\u65F6\u95F4",value:"updateTime"},{label:"\u6700\u540E\u8DDF\u8FDB",value:"followTime"}];const We={class:"order_detail_tab1"},qe={key:0},je={key:1},Xe={key:2},He={key:3},Ge={class:"flexBetween"},Ke=k("\u77ED\u4FE1"),Qe={key:5},Ye=V({__name:"index",props:{row:{type:Object,default:{}}},emits:["success","openProduct"],setup(c,{expose:_,emit:v}){const o=c;H();const r=G();U();const l=M({formData:{},checked1:!1,tableData:[],pagination:{pageSize:10,pageIndex:1,total:0}}),{formData:n,checked1:W,tableData:T,pagination:B}=J(l);De(o.row,s=>{g(),y()}),j(()=>{g()});let g=async()=>{var w;let s=o.row||{},i=s.orderTotalMoney||0;l.formData=P(N({},s),{orderProductsLength:(((w=s==null?void 0:s.orderProducts)==null?void 0:w.length)||0)+"\u6761",payType:findLabel(ge,s.payType),orderState:findLabel(Y,s.orderState),orderTotalMoney:"\xA5 "+i})};const y=async()=>{var i;let s=null;try{let w=r.query.orderId,R={followInfoType:"ORDER",detailsId:w,current:l.pagination.pageIndex,size:l.pagination.pageSize};s=await se.getList(R);let C=((i=s.data.records)==null?void 0:i.map(S=>{var q;return P(N({},S),{followType:findLabel(ae,S.followType),hollow:!1,followInfoType:R.followInfoType,time:(q=S.createTime)==null?void 0:q.split(" ")[0]})}))||[];l.tableData=C}catch{l.tableData=[]}},m=()=>{Fe(l.formData)},u=()=>{he(l.formData)};let E=()=>{v("openProduct")};return _({init:g}),(s,i)=>{const w=A("el-link"),R=A("el-descriptions-item"),C=A("el-descriptions"),S=A("el-col"),q=A("el-row");return p(),h("div",We,[a(q,{gutter:20},{default:b(()=>[a(S,{span:12},{default:b(()=>[a(C,{title:"\u57FA\u672C\u4FE1\u606F",class:"marginB20",column:2,border:""},{default:b(()=>[(p(!0),h(K,null,Q(e(Ue),(D,z)=>(p(),I(R,{"label-align":"right",align:"left",label:D.label,key:z,"label-class-name":"my-label","class-name":"my-content"},{default:b(()=>[D.type==1?(p(),h("span",qe,[a(w,{onClick:i[0]||(i[0]=X=>m()),underline:!1,type:"primary"},{default:b(()=>[k(x(e(n)[D.value]||"-"),1)]),_:2},1024)])):D.type==4?(p(),h("span",je,[a(w,{onClick:i[1]||(i[1]=X=>u()),underline:!1,type:"primary"},{default:b(()=>[k(x(e(n)[D.value]||"-"),1)]),_:2},1024)])):D.type==5?(p(),h("span",Xe,[a(w,{onClick:i[2]||(i[2]=X=>e(E)()),underline:!1,type:"primary"},{default:b(()=>[k(x(e(n)[D.value]||"-"),1)]),_:2},1024)])):D.type==2?(p(),h("span",He,[d("div",Ge,[d("div",null,x(e(n)[D.value]||"-"),1),d("div",null,[a(w,{type:"primary",icon:"Message"},{default:b(()=>[Ke]),_:1})])])])):(p(),h("span",Qe,x(e(n)[D.value]||"-"),1))]),_:2},1032,["label"]))),128))]),_:1}),a(C,{title:"\u56DE\u6B3E\u4FE1\u606F",class:"marginB20",column:2,border:""},{default:b(()=>[(p(!0),h(K,null,Q(e(Me),(D,z)=>(p(),I(R,{"label-align":"right",align:"left",label:D.label,key:z,"label-class-name":"my-label","class-name":"my-content"},{default:b(()=>[d("span",null,x(e(n)[D.value]||"-"),1)]),_:2},1032,["label"]))),128))]),_:1}),a(C,{title:"\u7CFB\u7EDF\u4FE1\u606F",class:"marginB20",column:2,border:""},{default:b(()=>[(p(!0),h(K,null,Q(e(Je),(D,z)=>(p(),I(R,{"label-align":"right",align:"left",label:D.label,key:z,"label-class-name":"my-label","class-name":"my-content"},{default:b(()=>[d("span",null,x(e(n)[D.value]||"-"),1)]),_:2},1032,["label"]))),128))]),_:1})]),_:1}),a(S,{span:12},{default:b(()=>[a(Z,{style:{height:"730px"},title:"\u8DDF\u8FDB\u8BB0\u5F55",tableData:e(T),pagination:e(B),isShowBtn:!1,"is-show-pagination":!1,onGetList:y},null,8,["tableData","pagination"])]),_:1})]),_:1})])}}});const Ze={class:"flexStart"},et=V({__name:"index",emits:["success"],setup(c,{expose:_,emit:v}){H();const o=G();U();const r=M({searchData:{startDate:"",endDate:"",keyWords:""},checked1:!1,tableData:[],orderId:"",pagination:{pageSize:10,pageIndex:1,total:0}}),{searchData:l,checked1:n,tableData:W,pagination:T}=J(r);let B=async(y={})=>{g()};j(()=>{g()});const g=async()=>{var m;let y=null;try{let u=JSON.parse(JSON.stringify(r.searchData));u.current=r.pagination.pageIndex,u.size=r.pagination.pageSize,u.detailsId=o.query.orderId,u.followInfoType="ORDER",y=await se.getList(u);let E=((m=y.data.records)==null?void 0:m.map(s=>{var i;return P(N({},s),{followType:findLabel(ae,s.followType),hollow:!1,followInfoType:u.followInfoType,time:(i=s.createTime)==null?void 0:i.split(" ")[0]})}))||[];r.tableData=E,r.pagination.total=y.data.total||0}catch{r.tableData=[]}};return _({init:B}),(y,m)=>{const u=A("DateRangeCom"),E=A("el-input");return p(),h("div",null,[a(Z,{style:{height:"730px"},title:"\u8DDF\u8FDB\u8BB0\u5F55",tableData:e(W),pagination:e(T),fileDownType:"sendDetail",searchData:e(l),onSuccess:g},{default:b(()=>[d("div",Ze,[a(u,{starTime:e(l).startDate,"onUpdate:starTime":m[0]||(m[0]=s=>e(l).startDate=s),endTime:e(l).endDate,"onUpdate:endTime":m[1]||(m[1]=s=>e(l).endDate=s),width:"220px",style:{"margin-right":"10px"},onChange:g},null,8,["starTime","endTime"]),a(E,{style:{"margin-right":"10px",width:"200px"},modelValue:e(l).keyWords,"onUpdate:modelValue":m[2]||(m[2]=s=>e(l).keyWords=s),placeholder:"\u641C\u7D22\u5173\u952E\u5B57",onBlur:g},null,8,["modelValue"])])]),_:1},8,["tableData","pagination","searchData"])])}}});const tt=V({__name:"index",emits:["success"],setup(c,{expose:_,emit:v}){U();const o=M({});J(o);let r=async(l={})=>{};return j(()=>{r()}),_({init:r}),(l,n)=>(p(),h("div",null,[a(ze)]))}});const at=c=>(ne("data-v-23789598"),c=c(),ue(),c),lt={class:"flexBetween",style:{"margin-bottom":"20px"}},ot=at(()=>d("div",null,"\u4EA7\u54C1\u8BB0\u5F55",-1)),nt={class:"flexStart right_box"},ut=k(" \u4EA7\u54C1\u8BB0\u5F55\u6570\u91CF: "),st=k(" \u4EA7\u54C1\u603B\u6570\u91CF: "),rt=k(" \u4EA7\u54C1\u603B\u91D1\u989D: "),it=k(" \u6574\u5355\u6298\u6263\u7387: "),dt=k(" \u62A5\u4EF7\u603B\u91D1\u989D: "),ct=V({__name:"index",props:{row:{type:Object,default:{}}},emits:["success"],setup(c,{emit:_}){const v=c;H(),G(),U();const o=M({searchData:{},showData:{},checked1:!1,tableCols:[{label:"\u4EA7\u54C1\u540D\u79F0",prop:"productName"},{label:"\u4EA7\u54C1\u7F16\u53F7",prop:"productId"},{label:"\u6807\u51C6\u5355\u4EF7",prop:"standardPrice"},{label:"\u5B9E\u9645\u552E\u4EF7",prop:"salePrice"},{label:"\u6570\u91CF",prop:"saleNumber"},{label:"\u6298\u6263\u7387",prop:"discount"},{label:"\u603B\u4EF7",prop:"totalPrice"},{label:"\u4EA7\u54C1\u89C4\u683C",prop:"productSpecification"},{label:"\u793C\u54C1",prop:"gift"},{label:"\u5907\u6CE8",prop:"remark"}],tableData:[],pagination:{pageSize:10,pageIndex:1,total:0}}),{searchData:r,showData:l,tableData:n,tableCols:W}=J(o);j(()=>{T()});const T=async()=>{var g,y,m,u,E;let B=null;try{let s=JSON.parse(JSON.stringify(o.searchData));s.current=o.pagination.pageIndex,s.size=o.pagination.pageSize,B=await oe.orderProDetail(v.row.orderId),o.tableData=((m=(y=(g=B.data)==null?void 0:g.productPriceVOS)==null?void 0:y.records)==null?void 0:m.map(i=>P(N({},i),{salePrice:i.salePrice||"0",saleNumber:i.saleNumber||"0",discount:i.discount||"0",totalPrice:i.totalPrice||"0",orderState:findLabel(Y,i.orderState)})))||[],o.showData=B.data,o.pagination.total=((E=(u=B.data)==null?void 0:u.productPriceVOS)==null?void 0:E.total)||0}catch{o.tableData=[]}};return(B,g)=>{const y=A("TableTemp");return p(),h("div",null,[d("div",lt,[ot,d("div",nt,[d("div",null,[ut,d("span",null,x(e(l).productRecordNumber||0)+" \u6761",1)]),d("div",null,[st,d("span",null,x(e(l).totalNumberOfProducts||0)+" \u4E2A",1)]),d("div",null,[rt,d("span",null,"\xA5 "+x(e(l).totalProductAmount||0),1)]),d("div",null,[it,d("span",null,x(e(l).wholeOrderDiscount||0)+" %",1)]),d("div",null,[dt,d("span",null,"\xA5 "+x(e(l).totalAmountQuoted||0),1)])])]),a(y,{comheight:360,isBorder:!0,isSelection:!1,isIndex:!0,isPagination:!1,loading:!1,isHandle:!0,tableData:e(n),tableCols:e(W),onRefresh:T,headerStyle:{background:"rgb(245 245 245)",color:"#666666",fontSize:"14px",fontWeight:700,height:"49px"}},null,8,["tableData","tableCols","headerStyle"])])}}});var pt=le(ct,[["__scopeId","data-v-23789598"]]);const _t=V({__name:"index",emits:["success"],setup(c,{expose:_,emit:v}){U();const o=M({searchData:{a:"xxx"},checked1:!1,tableData:[],pagination:{pageSize:10,pageIndex:1,total:0}});J(o);let r=async(l={})=>{};return j(()=>{r()}),_({init:r}),(l,n)=>(p(),h("div",null,[a(Ve,{fileType:"order"})]))}});const mt={class:"flexStart"},ft=V({__name:"index",props:{row:{type:Object,default:{}}},emits:["success"],setup(c,{expose:_,emit:v}){const o=c;H();const r=G();U();const l=M({searchData:{startDate:"",endDate:"",keyWords:""},checked1:!1,tableData:[],orderId:"",pagination:{pageSize:10,pageIndex:1,total:0}}),{searchData:n,checked1:W,tableData:T,pagination:B}=J(l);let g=async(m={})=>{y()};j(()=>{l.orderId=r.query.orderId,y()});const y=async()=>{Ne.order({current:l.pagination.pageIndex,size:l.pagination.pageSize,orderId:r.query.orderId,clientId:o.row.clientId}).then(m=>{l.tableData=m.data.records.map(u=>P(N({},u),{followContent:u.details,creatorName:u.userName})),l.pagination.total=m.data.total||0})};return _({init:g}),(m,u)=>{const E=A("DateRangeCom"),s=A("el-input");return p(),h("div",null,[a(Z,{style:{height:"730px"},title:" ",tableData:e(T),pagination:e(B),fileDownType:"sendDetail",searchData:e(n),onSuccess:y},{default:b(()=>[d("div",mt,[a(E,{starTime:e(n).startDate,"onUpdate:starTime":u[0]||(u[0]=i=>e(n).startDate=i),endTime:e(n).endDate,"onUpdate:endTime":u[1]||(u[1]=i=>e(n).endDate=i),width:"220px",style:{"margin-right":"10px"},onChange:y},null,8,["starTime","endTime"]),a(s,{style:{"margin-right":"10px",width:"200px"},modelValue:e(n).keyWords,"onUpdate:modelValue":u[2]||(u[2]=i=>e(n).keyWords=i),placeholder:"\u641C\u7D22\u5173\u952E\u5B57",onBlur:y},null,8,["modelValue"])])]),_:1},8,["tableData","pagination","searchData"])])}}});const bt=c=>(ne("data-v-0581cd3f"),c=c(),ue(),c),yt={key:0,class:"main",style:{position:"relative"}},vt={key:0,id:"topBox",class:"flexStart"},Dt={style:{"font-size":"12px"}},gt=bt(()=>d("span",{class:"round success"},null,-1)),Ft={class:"flexBetween marginB10"},ht={class:"el-descriptions__title"},xt={class:"flexStart detail_tit"},Bt={class:"marginR30"},wt={class:"marginR30"},kt={class:"marginR30"},At={class:"marginB20 flexStart"},Ct=k("\u65B0\u5EFA\u8DDF\u8FDB"),Et=k("\u65B0\u5EFA\u4EFB\u52A1"),St=k("\u6DFB\u52A0\u534F\u4F5C"),Tt=k("\u7F16\u8F91\u8BA2\u5355"),$t=k("\u5220\u9664\u8BA2\u5355"),It=V({__name:"index",setup(c){const _=H(),v=G();U();const o=M({activeName:"1",formData:{},list:[{label:"\u6982\u51B5\u4FE1\u606F",value:"1"},{label:"\u8DDF\u8FDB\u8BB0\u5F55",value:"2"},{label:"\u4EA7\u54C1\u8BB0\u5F55",value:"4"},{label:"\u76F8\u5173\u9644\u4EF6",value:"10"},{label:"\u8BA2\u5355\u52A8\u6001",value:"11"}],options:[],reload:!0}),{activeName:r,list:l,formData:n,options:W,reload:T}=J(o),B=$(null),g=$(null),y=$(null),m=$(null),u=$(null),E=$(null),s=$(null),i=$(null),w=$(null),R=$(null);xe(()=>{S()});const C=()=>{o.reload=!1,we(()=>{o.reload=!0}),S()};let S=()=>{let F=v.query.orderId;oe.orderDetail(F).then(t=>{Object.assign(o.formData,P(N({},t.data),{orderStateName:findLabel(Y,t.data.orderState)}))}).catch(t=>console.log(t))};const q=(F,t)=>{o.activeName=F.props.name},D=()=>{o.activeName="4"};let z=()=>{var F;(F=m==null?void 0:m.value)==null||F.init("",o.formData.clientId)};const X=F=>{var t,L;F==1?(t=B==null?void 0:B.value)==null||t.init("order",o.formData):F==2||F==3&&((L=w==null?void 0:w.value)==null||L.init("add",P(N({},o.formData),{relatedBusiness:3,relatedBusinessName:"\u8BA2\u5355",businessId:o.formData.orderId,businessName:o.formData.orderTitile})))};let re=()=>{var F;(F=u==null?void 0:u.value)==null||F.init("edit",N({},o.formData))};const ie=()=>{ke.confirm("\u5C06\u6C38\u4E45\u88AB\u5220\u9664\uFF0C\u5E76\u4E14\u65E0\u6CD5\u6062\u590D\u3002","\u786E\u5B9A\u5220\u9664\u5417\uFF1F").then(()=>{var F;(F=Ae)==null||F.del(o.formData.orderId).then(t=>{Ce.success("\u5220\u9664\u6210\u529F"),_.go(-1)})}).catch(()=>{})};return(F,t)=>{const L=A("el-button"),de=A("el-tab-pane"),ce=A("el-tabs"),pe=A("el-card");return e(T)?(p(),h("div",yt,[a(pe,{id:"content_box",shadow:"never"},{default:b(()=>[e(n).orderStateName?(p(),h("div",vt,[d("div",Dt,[gt,k(" "+x(e(n).orderStateName),1)])])):O("",!0),d("div",Ft,[d("div",ht,x(e(n).orderTitile),1)]),d("div",xt,[d("div",Bt,"\u5173\u8054\u5BA2\u6237\uFF1A"+x(e(n).clientName||"-"),1),d("div",wt," \u5173\u8054\u5546\u673A\uFF1A"+x(e(n).businessTitle||"-"),1),d("div",kt," \u4E0B\u6B21\u8DDF\u8FDB\uFF1A"+x(e(n).nextFollowTime||"-"),1)]),d("div",At,[a(L,{onClick:t[0]||(t[0]=f=>X(1))},{default:b(()=>[Ct]),_:1}),a(L,{onClick:t[1]||(t[1]=f=>X(3))},{default:b(()=>[Et]),_:1}),a(L,{onClick:t[2]||(t[2]=f=>e(z)())},{default:b(()=>[St]),_:1}),a(L,{onClick:t[3]||(t[3]=f=>e(re)())},{default:b(()=>[Tt]),_:1}),a(L,{onClick:t[4]||(t[4]=f=>ie()),icon:"Delete"},{default:b(()=>[$t]),_:1})]),a(ce,{modelValue:e(r),"onUpdate:modelValue":t[5]||(t[5]=f=>Be(r)?r.value=f:null),onTabClick:q,type:"border-card"},{default:b(()=>[(p(!0),h(K,null,Q(e(l),(f,_e)=>(p(),I(de,{label:f.label,key:_e,name:f.value},{default:b(()=>[e(r)=="1"&&f.value=="1"?(p(),I(Ye,{key:0,row:e(n),onOpenProduct:D},null,8,["row"])):O("",!0),e(r)=="2"&&f.value=="2"?(p(),I(et,{key:1,row:e(n),ref_for:!0,ref_key:"tab2Ref",ref:E},null,8,["row"])):O("",!0),e(r)=="3"&&f.value=="3"?(p(),I(tt,{key:2,row:e(n)},null,8,["row"])):O("",!0),e(r)=="4"&&f.value=="4"?(p(),I(pt,{key:3,row:e(n)},null,8,["row"])):O("",!0),e(r)=="10"&&f.value=="10"?(p(),I(_t,{key:4,row:e(n)},null,8,["row"])):O("",!0),e(r)=="11"&&f.value=="11"?(p(),I(ft,{key:5,row:e(n)},null,8,["row"])):O("",!0)]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"]),a(Se,{ref_key:"SJAddRefs",ref:g,onSuccess:t[6]||(t[6]=f=>C())},null,512),a(Ee,{ref_key:"followTaskRef",ref:B,onSuccess:t[7]||(t[7]=f=>C())},null,512),a(Te,{ref_key:"LXRAddRef",ref:y,onSuccess:t[8]||(t[8]=f=>C())},null,512),a(Pe,{ref_key:"addCooperationRef",ref:m,onSuccess:t[9]||(t[9]=f=>C())},null,512),a(Oe,{ref_key:"orderAddRed",ref:u,onSuccess:t[10]||(t[10]=f=>C())},null,512),a($e,{ref_key:"convert2CustomerRef",ref:s,onSuccess:t[11]||(t[11]=f=>C())},null,512),a(Ie,{ref_key:"XSaddRef",ref:i,onSuccess:t[12]||(t[12]=f=>C())},null,512),a(Re,{ref_key:"addTaskRef",ref:w,onSuccess:t[13]||(t[13]=f=>e(S)())},null,512),a(Le,{ref_key:"addTaskRef2",ref:R,onSuccess:t[14]||(t[14]=f=>e(S)())},null,512)]),_:1})])):O("",!0)}}});var Yt=le(It,[["__scopeId","data-v-0581cd3f"]]);export{Yt as default};
